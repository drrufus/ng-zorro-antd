{"version":3,"file":"ng-zorro-antd-code-editor.js","sources":["ng://ng-zorro-antd/code-editor/nz-code-editor.definitions.ts","ng://ng-zorro-antd/code-editor/nz-code-editor.service.ts","ng://ng-zorro-antd/code-editor/nz-code-editor.component.ts","ng://ng-zorro-antd/code-editor/nz-code-editor.module.ts"],"sourcesContent":["/**\r\n * @license\r\n * Copyright Alibaba.com All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\r\n */\r\n\r\nimport { InjectionToken } from '@angular/core';\r\nimport { SafeUrl } from '@angular/platform-browser';\r\nimport { editor } from 'monaco-editor';\r\nimport IEditorConstructionOptions = editor.IEditorConstructionOptions;\r\nimport IDiffEditorConstructionOptions = editor.IDiffEditorConstructionOptions;\r\n\r\nexport type EditorOptions = IEditorConstructionOptions;\r\nexport type DiffEditorOptions = IDiffEditorConstructionOptions;\r\nexport type JoinedEditorOptions = EditorOptions | DiffEditorOptions;\r\n\r\nexport type NzEditorMode = 'normal' | 'diff';\r\n\r\nexport enum NzCodeEditorLoadingStatus {\r\n  UNLOAD = 'unload',\r\n  LOADING = 'loading',\r\n  LOADED = 'LOADED'\r\n}\r\n\r\nexport interface NzCodeEditorConfig {\r\n  assetsRoot?: string | SafeUrl;\r\n  defaultEditorOption?: JoinedEditorOptions;\r\n  useStaticLoading?: boolean;\r\n\r\n  onLoad?(): void;\r\n  onFirstEditorInit?(): void;\r\n  onInit?(): void;\r\n}\r\n\r\nexport const NZ_CODE_EDITOR_CONFIG = new InjectionToken<NzCodeEditorConfig>('nz-code-editor-config', {\r\n  providedIn: 'root',\r\n  factory: NZ_CODE_EDITOR_CONFIG_FACTORY\r\n});\r\n\r\nexport function NZ_CODE_EDITOR_CONFIG_FACTORY(): NzCodeEditorConfig {\r\n  return {};\r\n}\r\n","/**\r\n * @license\r\n * Copyright Alibaba.com All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\r\n */\r\n\r\nimport { DOCUMENT } from '@angular/common';\r\nimport { Inject, Injectable, Optional } from '@angular/core';\r\nimport { of as observableOf, BehaviorSubject, Observable, Subject } from 'rxjs';\r\nimport { map, tap } from 'rxjs/operators';\r\n\r\nimport { warn, warnDeprecation, NzConfigService, PREFIX } from 'ng-zorro-antd/core';\r\nimport {\r\n  JoinedEditorOptions,\r\n  NzCodeEditorConfig,\r\n  NzCodeEditorLoadingStatus,\r\n  NZ_CODE_EDITOR_CONFIG\r\n} from './nz-code-editor.definitions';\r\n\r\n// tslint:disable-next-line no-any\r\ndeclare const monaco: any;\r\n\r\nconst NZ_CONFIG_COMPONENT_NAME = 'codeEditor';\r\n\r\n// tslint:disable no-any\r\nfunction tryTriggerFunc(fn?: (...args: any[]) => any): (...args: any) => void {\r\n  return (...args: any[]) => {\r\n    if (fn) {\r\n      fn(...args);\r\n    }\r\n  };\r\n}\r\n// tslint:enable no-any\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class NzCodeEditorService {\r\n  private document: Document;\r\n  private firstEditorInitialized = false;\r\n  private loaded$ = new Subject<boolean>();\r\n  private loadingStatus = NzCodeEditorLoadingStatus.UNLOAD;\r\n  private option: JoinedEditorOptions;\r\n  private config: NzCodeEditorConfig;\r\n\r\n  option$ = new BehaviorSubject<JoinedEditorOptions>(this.option);\r\n\r\n  constructor(\r\n    private readonly nzConfigService: NzConfigService,\r\n    @Inject(DOCUMENT) _document: any, // tslint:disable-line no-any\r\n    @Inject(NZ_CODE_EDITOR_CONFIG) @Optional() config?: NzCodeEditorConfig\r\n  ) {\r\n    const globalConfig = this.nzConfigService.getConfigForComponent(NZ_CONFIG_COMPONENT_NAME);\r\n\r\n    if (config) {\r\n      warnDeprecation(\r\n        `'NZ_CODE_EDITOR_CONFIG' is deprecated and will be removed in next minor version. Please use 'NzConfigService' instead.`\r\n      );\r\n    }\r\n\r\n    this.document = _document;\r\n    this.config = { ...config, ...globalConfig };\r\n    this.option = this.config.defaultEditorOption || {};\r\n\r\n    this.nzConfigService.getConfigChangeEventForComponent(NZ_CONFIG_COMPONENT_NAME).subscribe(() => {\r\n      const newGlobalConfig = this.nzConfigService.getConfigForComponent(NZ_CONFIG_COMPONENT_NAME);\r\n      if (newGlobalConfig) {\r\n        this._updateDefaultOption(newGlobalConfig.defaultEditorOption);\r\n      }\r\n    });\r\n  }\r\n\r\n  updateDefaultOption(option: JoinedEditorOptions): void {\r\n    warnDeprecation(\r\n      `'updateDefaultOption' is deprecated and will be removed in next minor version. Please use 'set' of 'NzConfigService' instead.`\r\n    );\r\n\r\n    this._updateDefaultOption(option);\r\n  }\r\n\r\n  private _updateDefaultOption(option: JoinedEditorOptions): void {\r\n    this.option = { ...this.option, ...option };\r\n    this.option$.next(this.option);\r\n\r\n    if (option.theme) {\r\n      monaco.editor.setTheme(option.theme);\r\n    }\r\n  }\r\n\r\n  requestToInit(): Observable<JoinedEditorOptions> {\r\n    if (this.loadingStatus === NzCodeEditorLoadingStatus.LOADED) {\r\n      this.onInit();\r\n      return observableOf(this.getLatestOption());\r\n    }\r\n\r\n    if (this.loadingStatus === NzCodeEditorLoadingStatus.UNLOAD) {\r\n      if (this.config.useStaticLoading && typeof monaco === 'undefined') {\r\n        warn(\r\n          'You choose to use static loading but it seems that you forget ' +\r\n            'to config webpack plugin correctly. Please refer to our official website' +\r\n            'for more details about static loading.'\r\n        );\r\n      } else {\r\n        this.loadMonacoScript();\r\n      }\r\n    }\r\n\r\n    return this.loaded$.asObservable().pipe(\r\n      tap(() => this.onInit()),\r\n      map(() => this.getLatestOption())\r\n    );\r\n  }\r\n\r\n  private loadMonacoScript(): void {\r\n    if (this.config.useStaticLoading) {\r\n      this.onLoad();\r\n      return;\r\n    }\r\n\r\n    if (this.loadingStatus === NzCodeEditorLoadingStatus.LOADING) {\r\n      return;\r\n    }\r\n\r\n    this.loadingStatus = NzCodeEditorLoadingStatus.LOADING;\r\n\r\n    const assetsRoot = this.config.assetsRoot;\r\n    const vs = assetsRoot ? `${assetsRoot}/vs` : 'assets/vs';\r\n    const windowAsAny = window as any; // tslint:disable-line no-any\r\n    const loadScript = this.document.createElement('script');\r\n\r\n    loadScript.type = 'text/javascript';\r\n    loadScript.src = `${vs}/loader.js`;\r\n    loadScript.onload = () => {\r\n      windowAsAny.require.config({\r\n        paths: { vs }\r\n      });\r\n      windowAsAny.require(['vs/editor/editor.main'], () => {\r\n        this.onLoad();\r\n      });\r\n    };\r\n    loadScript.onerror = () => {\r\n      throw new Error(`${PREFIX} cannot load assets of monaco editor from source \"${vs}\".`);\r\n    };\r\n\r\n    this.document.documentElement.appendChild(loadScript);\r\n  }\r\n\r\n  private onLoad(): void {\r\n    this.loadingStatus = NzCodeEditorLoadingStatus.LOADED;\r\n    this.loaded$.next(true);\r\n    this.loaded$.complete();\r\n\r\n    tryTriggerFunc(this.config.onLoad)();\r\n  }\r\n\r\n  private onInit(): void {\r\n    if (!this.firstEditorInitialized) {\r\n      this.firstEditorInitialized = true;\r\n      tryTriggerFunc(this.config.onFirstEditorInit)();\r\n    }\r\n\r\n    tryTriggerFunc(this.config.onInit)();\r\n  }\r\n\r\n  private getLatestOption(): JoinedEditorOptions {\r\n    return { ...this.option };\r\n  }\r\n}\r\n","/**\r\n * @license\r\n * Copyright Alibaba.com All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\r\n */\r\n\r\nimport {\r\n  forwardRef,\r\n  AfterViewInit,\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Input,\r\n  NgZone,\r\n  OnDestroy,\r\n  Output,\r\n  TemplateRef,\r\n  ViewEncapsulation\r\n} from '@angular/core';\r\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\r\nimport { combineLatest, fromEvent, BehaviorSubject, Subject } from 'rxjs';\r\nimport { debounceTime, distinctUntilChanged, filter, map, takeUntil } from 'rxjs/operators';\r\n\r\nimport { inNextTick, warn, InputBoolean } from 'ng-zorro-antd/core';\r\n\r\nimport { DiffEditorOptions, EditorOptions, JoinedEditorOptions, NzEditorMode } from './nz-code-editor.definitions';\r\nimport { NzCodeEditorService } from './nz-code-editor.service';\r\n\r\n// Import types from monaco editor.\r\nimport { editor } from 'monaco-editor';\r\nimport IEditor = editor.IEditor;\r\nimport IDiffEditor = editor.IDiffEditor;\r\nimport ITextModel = editor.ITextModel;\r\n\r\n// tslint:disable-next-line no-any\r\ndeclare const monaco: any;\r\n\r\n@Component({\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  encapsulation: ViewEncapsulation.None,\r\n  selector: 'nz-code-editor',\r\n  exportAs: 'nzCodeEditor',\r\n  templateUrl: './nz-code-editor.component.html',\r\n  host: {\r\n    '[class.ant-code-editor]': 'true'\r\n  },\r\n  providers: [\r\n    {\r\n      provide: NG_VALUE_ACCESSOR,\r\n      useExisting: forwardRef(() => NzCodeEditorComponent),\r\n      multi: true\r\n    }\r\n  ]\r\n})\r\nexport class NzCodeEditorComponent implements OnDestroy, AfterViewInit {\r\n  @Input() nzEditorMode: NzEditorMode = 'normal';\r\n  @Input() nzOriginalText = '';\r\n  @Input() @InputBoolean() nzLoading = false;\r\n  @Input() @InputBoolean() nzFullControl = false;\r\n  @Input() nzToolkit: TemplateRef<void>;\r\n\r\n  @Input() set nzEditorOption(value: JoinedEditorOptions) {\r\n    this.editorOption$.next(value);\r\n  }\r\n\r\n  @Output() readonly nzEditorInitialized = new EventEmitter<IEditor | IDiffEditor>();\r\n\r\n  editorOptionCached: JoinedEditorOptions = {};\r\n\r\n  private readonly el: HTMLElement;\r\n  private destroy$ = new Subject<void>();\r\n  private resize$ = new Subject<void>();\r\n  private editorOption$ = new BehaviorSubject<JoinedEditorOptions>({});\r\n  private editorInstance: IEditor | IDiffEditor;\r\n  private value = '';\r\n  private modelSet = false;\r\n\r\n  constructor(private nzCodeEditorService: NzCodeEditorService, private ngZone: NgZone, elementRef: ElementRef) {\r\n    this.el = elementRef.nativeElement;\r\n  }\r\n\r\n  /**\r\n   * Initialize a monaco editor instance.\r\n   */\r\n  ngAfterViewInit(): void {\r\n    this.nzCodeEditorService.requestToInit().subscribe(option => this.setup(option));\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.editorInstance) {\r\n      this.editorInstance.dispose();\r\n    }\r\n\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  writeValue(value: string): void {\r\n    this.value = value;\r\n    this.setValue();\r\n  }\r\n\r\n  // tslint:disable-next-line no-any\r\n  registerOnChange(fn: (value: string) => void): any {\r\n    this.onChange = fn;\r\n  }\r\n\r\n  // tslint:disable-next-line no-any\r\n  registerOnTouched(fn: any): void {\r\n    this.onTouch = fn;\r\n  }\r\n\r\n  onChange(_value: string): void {}\r\n\r\n  onTouch(): void {}\r\n\r\n  layout(): void {\r\n    this.resize$.next();\r\n  }\r\n\r\n  private setup(option: JoinedEditorOptions): void {\r\n    inNextTick().subscribe(() => {\r\n      this.editorOptionCached = option;\r\n      this.registerOptionChanges();\r\n      this.initMonacoEditorInstance();\r\n      this.registerResizeChange();\r\n      this.setValue();\r\n\r\n      if (!this.nzFullControl) {\r\n        this.setValueEmitter();\r\n      }\r\n\r\n      this.nzEditorInitialized.emit(this.editorInstance);\r\n    });\r\n  }\r\n\r\n  private registerOptionChanges(): void {\r\n    combineLatest([this.editorOption$, this.nzCodeEditorService.option$])\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe(([selfOpt, defaultOpt]) => {\r\n        this.editorOptionCached = {\r\n          ...this.editorOptionCached,\r\n          ...defaultOpt,\r\n          ...selfOpt\r\n        };\r\n        this.updateOptionToMonaco();\r\n      });\r\n  }\r\n\r\n  private initMonacoEditorInstance(): void {\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this.editorInstance =\r\n        this.nzEditorMode === 'normal'\r\n          ? monaco.editor.create(this.el, { ...this.editorOptionCached })\r\n          : monaco.editor.createDiffEditor(this.el, {\r\n              ...(this.editorOptionCached as DiffEditorOptions)\r\n            });\r\n    });\r\n  }\r\n\r\n  private registerResizeChange(): void {\r\n    this.ngZone.runOutsideAngular(() => {\r\n      fromEvent(window, 'resize')\r\n        .pipe(debounceTime(300), takeUntil(this.destroy$))\r\n        .subscribe(() => {\r\n          this.layout();\r\n        });\r\n\r\n      this.resize$\r\n        .pipe(\r\n          takeUntil(this.destroy$),\r\n          filter(() => !!this.editorInstance),\r\n          map(() => ({\r\n            width: this.el.clientWidth,\r\n            height: this.el.clientHeight\r\n          })),\r\n          distinctUntilChanged((a, b) => a.width === b.width && a.height === b.height),\r\n          debounceTime(50)\r\n        )\r\n        .subscribe(() => {\r\n          this.editorInstance.layout();\r\n        });\r\n    });\r\n  }\r\n\r\n  private setValue(): void {\r\n    if (!this.editorInstance) {\r\n      return;\r\n    }\r\n\r\n    if (this.nzFullControl && this.value) {\r\n      warn(`should not set value when you are using full control mode! It would result in ambiguous data flow!`);\r\n      return;\r\n    }\r\n\r\n    if (this.nzEditorMode === 'normal') {\r\n      if (this.modelSet) {\r\n        (this.editorInstance.getModel() as ITextModel).setValue(this.value);\r\n      } else {\r\n        (this.editorInstance as IEditor).setModel(\r\n          monaco.editor.createModel(this.value, (this.editorOptionCached as EditorOptions).language)\r\n        );\r\n        this.modelSet = true;\r\n      }\r\n    } else {\r\n      if (this.modelSet) {\r\n        const model = (this.editorInstance as IDiffEditor).getModel()!;\r\n        model.modified.setValue(this.value);\r\n        model.original.setValue(this.nzOriginalText);\r\n      } else {\r\n        const language = (this.editorOptionCached as EditorOptions).language;\r\n        (this.editorInstance as IDiffEditor).setModel({\r\n          original: monaco.editor.createModel(this.nzOriginalText, language),\r\n          modified: monaco.editor.createModel(this.value, language)\r\n        });\r\n        this.modelSet = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  private setValueEmitter(): void {\r\n    const model = (this.nzEditorMode === 'normal'\r\n      ? (this.editorInstance as IEditor).getModel()\r\n      : (this.editorInstance as IDiffEditor).getModel()!.modified) as ITextModel;\r\n\r\n    model.onDidChangeContent(() => {\r\n      this.emitValue(model.getValue());\r\n    });\r\n  }\r\n\r\n  private emitValue(value: string): void {\r\n    this.value = value;\r\n    this.onChange(value);\r\n  }\r\n\r\n  private updateOptionToMonaco(): void {\r\n    if (this.editorInstance) {\r\n      this.editorInstance.updateOptions({ ...this.editorOptionCached });\r\n    }\r\n  }\r\n}\r\n","/**\r\n * @license\r\n * Copyright Alibaba.com All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\r\n */\r\n\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\n\r\nimport { NzIconModule } from 'ng-zorro-antd/icon';\r\nimport { NzSpinModule } from 'ng-zorro-antd/spin';\r\n\r\nimport { NzCodeEditorComponent } from './nz-code-editor.component';\r\n\r\n@NgModule({\r\n  declarations: [NzCodeEditorComponent],\r\n  imports: [CommonModule, NzIconModule, NzSpinModule],\r\n  exports: [NzCodeEditorComponent]\r\n})\r\nexport class NzCodeEditorModule {}\r\n"],"names":["observableOf","tslib_1.__decorate"],"mappings":"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"}