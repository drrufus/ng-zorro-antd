{"version":3,"file":"ng-zorro-antd-avatar.js","sources":["ng://ng-zorro-antd/avatar/nz-avatar.component.html","ng://ng-zorro-antd/avatar/nz-avatar.component.ts","ng://ng-zorro-antd/avatar/nz-avatar.module.ts","ng://ng-zorro-antd/avatar/public-api.ts","ng://ng-zorro-antd/avatar/ng-zorro-antd-avatar.ts"],"sourcesContent":["<i\r\n  nz-icon\r\n  *ngIf=\"nzIcon && hasIcon\"\r\n  [nzType]=\"!oldAPIIcon && nzIcon\"\r\n  [ngClass]=\"oldAPIIcon && nzIcon\"\r\n></i>\r\n<img\r\n  *ngIf=\"nzSrc && hasSrc\"\r\n  [src]=\"nzSrc\"\r\n  [attr.srcset]=\"nzSrcSet\"\r\n  [attr.alt]=\"nzAlt\"\r\n  (error)=\"imgError($event)\"\r\n/>\r\n<span class=\"ant-avatar-string\" #textEl [ngStyle]=\"textStyles\" *ngIf=\"nzText && hasText\">{{\r\n  nzText\r\n}}</span>\r\n","/**\r\n * @license\r\n * Copyright Alibaba.com All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\r\n */\r\n\r\nimport { Platform } from '@angular/cdk/platform';\r\nimport {\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Input,\r\n  OnChanges,\r\n  Output,\r\n  Renderer2,\r\n  SimpleChanges,\r\n  ViewChild,\r\n  ViewEncapsulation\r\n} from '@angular/core';\r\n\r\nimport { NzConfigService, NzShapeSCType, NzSizeLDSType, NzSizeMap, NzUpdateHostClassService, WithConfig } from 'ng-zorro-antd/core';\r\n\r\nconst NZ_CONFIG_COMPONENT_NAME = 'avatar';\r\n\r\n@Component({\r\n  selector: 'nz-avatar',\r\n  exportAs: 'nzAvatar',\r\n  templateUrl: './nz-avatar.component.html',\r\n  providers: [NzUpdateHostClassService],\r\n  preserveWhitespaces: false,\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class NzAvatarComponent implements OnChanges {\r\n  @Input() @WithConfig(NZ_CONFIG_COMPONENT_NAME, 'circle') nzShape: NzShapeSCType;\r\n  @Input() @WithConfig(NZ_CONFIG_COMPONENT_NAME, 'default') nzSize: NzSizeLDSType | number;\r\n  @Input() nzText: string;\r\n  @Input() nzSrc: string;\r\n  @Input() nzSrcSet: string;\r\n  @Input() nzAlt: string;\r\n  @Input() nzIcon: string;\r\n  @Output() readonly nzError = new EventEmitter<Event>();\r\n\r\n  oldAPIIcon = true; // Make the user defined icon compatible to old API. Should be removed in 2.0.\r\n  hasText: boolean = false;\r\n  hasSrc: boolean = true;\r\n  hasIcon: boolean = false;\r\n  textStyles: {};\r\n\r\n  @ViewChild('textEl', { static: false }) textEl: ElementRef;\r\n\r\n  private el: HTMLElement = this.elementRef.nativeElement;\r\n  private prefixCls = 'ant-avatar';\r\n  private sizeMap: NzSizeMap = { large: 'lg', small: 'sm' };\r\n\r\n  constructor(\r\n    public nzConfigService: NzConfigService,\r\n    private elementRef: ElementRef,\r\n    private cd: ChangeDetectorRef,\r\n    private updateHostClassService: NzUpdateHostClassService,\r\n    private renderer: Renderer2,\r\n    private platform: Platform\r\n  ) {}\r\n\r\n  setClass(): this {\r\n    const classMap = {\r\n      [this.prefixCls]: true,\r\n      [`${this.prefixCls}-${this.sizeMap[this.nzSize]}`]: this.sizeMap[this.nzSize],\r\n      [`${this.prefixCls}-${this.nzShape}`]: this.nzShape,\r\n      [`${this.prefixCls}-icon`]: this.nzIcon,\r\n      [`${this.prefixCls}-image`]: this.hasSrc // downgrade after image error\r\n    };\r\n    this.updateHostClassService.updateHostClass(this.el, classMap);\r\n    this.cd.detectChanges();\r\n    return this;\r\n  }\r\n\r\n  imgError($event: Event): void {\r\n    this.nzError.emit($event);\r\n    if (!$event.defaultPrevented) {\r\n      this.hasSrc = false;\r\n      this.hasIcon = false;\r\n      this.hasText = false;\r\n      if (this.nzIcon) {\r\n        this.hasIcon = true;\r\n      } else if (this.nzText) {\r\n        this.hasText = true;\r\n      }\r\n      this.setClass().notifyCalc();\r\n      this.setSizeStyle();\r\n    }\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (changes.hasOwnProperty('nzIcon') && changes.nzIcon.currentValue) {\r\n      this.oldAPIIcon = changes.nzIcon.currentValue.indexOf('anticon') > -1;\r\n    }\r\n    this.hasText = !this.nzSrc && !!this.nzText;\r\n    this.hasIcon = !this.nzSrc && !!this.nzIcon;\r\n    this.hasSrc = !!this.nzSrc;\r\n\r\n    this.setClass().notifyCalc();\r\n    this.setSizeStyle();\r\n  }\r\n\r\n  private calcStringSize(): void {\r\n    if (!this.hasText) {\r\n      return;\r\n    }\r\n\r\n    const childrenWidth = this.textEl.nativeElement.offsetWidth;\r\n    const avatarWidth = this.el.getBoundingClientRect().width;\r\n    const scale = avatarWidth - 8 < childrenWidth ? (avatarWidth - 8) / childrenWidth : 1;\r\n    this.textStyles = {\r\n      transform: `scale(${scale}) translateX(-50%)`\r\n    };\r\n    if (typeof this.nzSize === 'number') {\r\n      Object.assign(this.textStyles, {\r\n        lineHeight: `${this.nzSize}px`\r\n      });\r\n    }\r\n    this.cd.detectChanges();\r\n  }\r\n\r\n  private notifyCalc(): this {\r\n    // If use ngAfterViewChecked, always demands more computations, so......\r\n    if (this.platform.isBrowser) {\r\n      setTimeout(() => {\r\n        this.calcStringSize();\r\n      });\r\n    }\r\n    return this;\r\n  }\r\n\r\n  private setSizeStyle(): void {\r\n    const size = typeof this.nzSize === 'string' ? this.nzSize : `${this.nzSize}px`;\r\n    this.renderer.setStyle(this.el, 'width', size);\r\n    this.renderer.setStyle(this.el, 'height', size);\r\n    this.renderer.setStyle(this.el, 'line-height', size);\r\n    if (this.hasIcon) {\r\n      this.renderer.setStyle(this.el, 'font-size', `calc(${size} / 2)`);\r\n    }\r\n  }\r\n}\r\n","/**\r\n * @license\r\n * Copyright Alibaba.com All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\r\n */\r\nimport { PlatformModule } from '@angular/cdk/platform';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { NzIconModule } from 'ng-zorro-antd/icon';\r\n\r\nimport { NzAvatarComponent } from './nz-avatar.component';\r\n\r\n@NgModule({\r\n  declarations: [NzAvatarComponent],\r\n  exports: [NzAvatarComponent],\r\n  imports: [CommonModule, NzIconModule, PlatformModule]\r\n})\r\nexport class NzAvatarModule {}\r\n","/**\r\n * @license\r\n * Copyright Alibaba.com All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\r\n */\r\n\r\nexport * from './nz-avatar.component';\r\nexport * from './nz-avatar.module';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i0.ɵɵelement","i0.ɵɵproperty","i0.ɵɵelementStart","i0.ɵɵlistener","i0.ɵɵelementEnd","i0.ɵɵattribute","i0.ɵɵtext","i0.ɵɵadvance","i0.ɵɵtextInterpolate","i0.ɵɵtemplate"],"mappings":"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"}