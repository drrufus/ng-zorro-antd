{"version":3,"file":"ng-zorro-antd-anchor.js","sources":["ng:/ng-zorro-antd/anchor/nz-anchor.component.ts","ng:/ng-zorro-antd/anchor/nz-anchor-link.component.ts","ng:/ng-zorro-antd/anchor/nz-anchor.module.ts"],"names":["tslib_1.__decorate"],"mappings":"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","sourcesContent":["/**\r\n * @license\r\n * Copyright Alibaba.com All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\r\n */\r\n\r\nimport { Platform } from '@angular/cdk/platform';\r\nimport { DOCUMENT } from '@angular/common';\r\nimport {\r\n  AfterViewInit,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Inject,\r\n  Input,\r\n  OnDestroy,\r\n  Output,\r\n  ViewChild,\r\n  ViewEncapsulation\r\n} from '@angular/core';\r\nimport { fromEvent, Subscription } from 'rxjs';\r\nimport { distinctUntilChanged, throttleTime } from 'rxjs/operators';\r\n\r\nimport {\r\n  toNumber,\r\n  InputBoolean,\r\n  InputNumber,\r\n  NgStyleInterface,\r\n  NzConfigService,\r\n  NzScrollService,\r\n  WithConfig\r\n} from 'ng-zorro-antd/core';\r\n\r\nimport { NzAnchorLinkComponent } from './nz-anchor-link.component';\r\n\r\ninterface Section {\r\n  comp: NzAnchorLinkComponent;\r\n  top: number;\r\n}\r\n\r\nconst NZ_CONFIG_COMPONENT_NAME = 'anchor';\r\nconst sharpMatcherRegx = /#([^#]+)$/;\r\n\r\n@Component({\r\n  selector: 'nz-anchor',\r\n  exportAs: 'nzAnchor',\r\n  preserveWhitespaces: false,\r\n  templateUrl: './nz-anchor.component.html',\r\n  encapsulation: ViewEncapsulation.None,\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class NzAnchorComponent implements OnDestroy, AfterViewInit {\r\n  @ViewChild('ink', { static: false }) private ink: ElementRef;\r\n\r\n  @Input() @InputBoolean() nzAffix = true;\r\n\r\n  @Input()\r\n  @WithConfig(NZ_CONFIG_COMPONENT_NAME, false)\r\n  @InputBoolean()\r\n  nzShowInkInFixed: boolean;\r\n\r\n  @Input()\r\n  @WithConfig(NZ_CONFIG_COMPONENT_NAME, 5)\r\n  @InputNumber()\r\n  nzBounds: number;\r\n\r\n  @Input()\r\n  @WithConfig<number>(NZ_CONFIG_COMPONENT_NAME)\r\n  set nzOffsetTop(value: number) {\r\n    this._offsetTop = toNumber(value, 0);\r\n    this.wrapperStyle = {\r\n      'max-height': `calc(100vh - ${this._offsetTop}px)`\r\n    };\r\n  }\r\n\r\n  get nzOffsetTop(): number {\r\n    return this._offsetTop;\r\n  }\r\n\r\n  private _offsetTop: number;\r\n\r\n  @Input()\r\n  set nzTarget(el: string | Element) {\r\n    this.target = typeof el === 'string' ? this.doc.querySelector(el) : el;\r\n    this.registerScrollEvent();\r\n  }\r\n\r\n  @Output() readonly nzClick = new EventEmitter<string>();\r\n  @Output() readonly nzScroll = new EventEmitter<NzAnchorLinkComponent>();\r\n\r\n  visible = false;\r\n  wrapperStyle: NgStyleInterface = { 'max-height': '100vh' };\r\n\r\n  private links: NzAnchorLinkComponent[] = [];\r\n  private animating = false;\r\n  private target: Element | null = null;\r\n  private scroll$: Subscription | null = null;\r\n  private destroyed = false;\r\n\r\n  constructor(\r\n    public nzConfigService: NzConfigService,\r\n    private scrollSrv: NzScrollService,\r\n    /* tslint:disable-next-line:no-any */\r\n    @Inject(DOCUMENT) private doc: any,\r\n    private cdr: ChangeDetectorRef,\r\n    private platform: Platform\r\n  ) {}\r\n\r\n  registerLink(link: NzAnchorLinkComponent): void {\r\n    this.links.push(link);\r\n  }\r\n\r\n  unregisterLink(link: NzAnchorLinkComponent): void {\r\n    this.links.splice(this.links.indexOf(link), 1);\r\n  }\r\n\r\n  private getTarget(): Element | Window {\r\n    return this.target || window;\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.registerScrollEvent();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroyed = true;\r\n    this.removeListen();\r\n  }\r\n\r\n  private registerScrollEvent(): void {\r\n    if (!this.platform.isBrowser) {\r\n      return;\r\n    }\r\n    this.removeListen();\r\n    this.scroll$ = fromEvent(this.getTarget(), 'scroll')\r\n      .pipe(\r\n        throttleTime(50),\r\n        distinctUntilChanged()\r\n      )\r\n      .subscribe(() => this.handleScroll());\r\n    // Browser would maintain the scrolling position when refreshing.\r\n    // So we have to delay calculation in avoid of getting a incorrect result.\r\n    setTimeout(() => this.handleScroll());\r\n  }\r\n\r\n  private removeListen(): void {\r\n    if (this.scroll$) {\r\n      this.scroll$.unsubscribe();\r\n    }\r\n  }\r\n\r\n  private getOffsetTop(element: HTMLElement): number {\r\n    if (!element || !element.getClientRects().length) {\r\n      return 0;\r\n    }\r\n    const rect = element.getBoundingClientRect();\r\n    if (rect.width || rect.height) {\r\n      if (this.getTarget() === window) {\r\n        return rect.top - element.ownerDocument!.documentElement!.clientTop;\r\n      }\r\n      return rect.top - (this.getTarget() as HTMLElement).getBoundingClientRect().top;\r\n    }\r\n    return rect.top;\r\n  }\r\n\r\n  handleScroll(): void {\r\n    if (typeof document === 'undefined' || this.destroyed || this.animating) {\r\n      return;\r\n    }\r\n\r\n    const sections: Section[] = [];\r\n    const scope = (this.nzOffsetTop || 0) + this.nzBounds;\r\n    this.links.forEach(comp => {\r\n      const sharpLinkMatch = sharpMatcherRegx.exec(comp.nzHref.toString());\r\n      if (!sharpLinkMatch) {\r\n        return;\r\n      }\r\n      const target = this.doc.getElementById(sharpLinkMatch[1]);\r\n      if (target) {\r\n        const top = this.getOffsetTop(target);\r\n        if (top < scope) {\r\n          sections.push({\r\n            top,\r\n            comp\r\n          });\r\n        }\r\n      }\r\n    });\r\n\r\n    this.visible = !!sections.length;\r\n    if (!this.visible) {\r\n      this.clearActive();\r\n      this.cdr.detectChanges();\r\n    } else {\r\n      const maxSection = sections.reduce((prev, curr) => (curr.top > prev.top ? curr : prev));\r\n      this.handleActive(maxSection.comp);\r\n    }\r\n  }\r\n\r\n  private clearActive(): void {\r\n    this.links.forEach(i => {\r\n      i.active = false;\r\n      i.markForCheck();\r\n    });\r\n  }\r\n\r\n  private handleActive(comp: NzAnchorLinkComponent): void {\r\n    this.clearActive();\r\n\r\n    comp.active = true;\r\n    comp.markForCheck();\r\n\r\n    const linkNode = (comp.elementRef.nativeElement as HTMLDivElement).querySelector(\r\n      '.ant-anchor-link-title'\r\n    ) as HTMLElement;\r\n    this.ink.nativeElement.style.top = `${linkNode.offsetTop + linkNode.clientHeight / 2 - 4.5}px`;\r\n    this.visible = true;\r\n    this.cdr.detectChanges();\r\n\r\n    this.nzScroll.emit(comp);\r\n  }\r\n\r\n  handleScrollTo(linkComp: NzAnchorLinkComponent): void {\r\n    const el = this.doc.querySelector(linkComp.nzHref);\r\n    if (!el) {\r\n      return;\r\n    }\r\n\r\n    this.animating = true;\r\n    const containerScrollTop = this.scrollSrv.getScroll(this.getTarget());\r\n    const elOffsetTop = this.getOffsetTop(el);\r\n    const targetScrollTop = containerScrollTop + elOffsetTop - (this.nzOffsetTop || 0);\r\n    this.scrollSrv.scrollTo(this.getTarget(), targetScrollTop, undefined, () => {\r\n      this.animating = false;\r\n      this.handleActive(linkComp);\r\n    });\r\n    this.nzClick.emit(linkComp.nzHref);\r\n  }\r\n}\r\n","/**\r\n * @license\r\n * Copyright Alibaba.com All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\r\n */\r\n\r\nimport { Platform } from '@angular/cdk/platform';\r\nimport {\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  ContentChild,\r\n  ElementRef,\r\n  Input,\r\n  OnDestroy,\r\n  OnInit,\r\n  Renderer2,\r\n  TemplateRef,\r\n  ViewEncapsulation\r\n} from '@angular/core';\r\n\r\nimport { NzAnchorComponent } from './nz-anchor.component';\r\n\r\n@Component({\r\n  selector: 'nz-link',\r\n  exportAs: 'nzLink',\r\n  preserveWhitespaces: false,\r\n  templateUrl: './nz-anchor-link.component.html',\r\n  host: {\r\n    '[class.ant-anchor-link-active]': 'active'\r\n  },\r\n  styles: [\r\n    `\r\n      nz-link {\r\n        display: block;\r\n      }\r\n    `\r\n  ],\r\n  encapsulation: ViewEncapsulation.None,\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class NzAnchorLinkComponent implements OnInit, OnDestroy {\r\n  @Input() nzHref = '#';\r\n\r\n  titleStr: string | null = '';\r\n  titleTpl: TemplateRef<void>;\r\n  active: boolean = false;\r\n\r\n  @Input()\r\n  set nzTitle(value: string | TemplateRef<void>) {\r\n    if (value instanceof TemplateRef) {\r\n      this.titleStr = null;\r\n      this.titleTpl = value;\r\n    } else {\r\n      this.titleStr = value;\r\n    }\r\n  }\r\n\r\n  @ContentChild('nzTemplate', { static: false }) nzTemplate: TemplateRef<void>;\r\n\r\n  constructor(\r\n    public elementRef: ElementRef,\r\n    private anchorComp: NzAnchorComponent,\r\n    private cdr: ChangeDetectorRef,\r\n    private platform: Platform,\r\n    renderer: Renderer2\r\n  ) {\r\n    renderer.addClass(elementRef.nativeElement, 'ant-anchor-link');\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.anchorComp.registerLink(this);\r\n  }\r\n\r\n  goToClick(e: Event): void {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if (this.platform.isBrowser) {\r\n      this.anchorComp.handleScrollTo(this);\r\n    }\r\n  }\r\n\r\n  markForCheck(): void {\r\n    this.cdr.markForCheck();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.anchorComp.unregisterLink(this);\r\n  }\r\n}\r\n","/**\r\n * @license\r\n * Copyright Alibaba.com All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\r\n */\r\nimport { PlatformModule } from '@angular/cdk/platform';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { NzAffixModule } from 'ng-zorro-antd/affix';\r\nimport { SCROLL_SERVICE_PROVIDER } from 'ng-zorro-antd/core';\r\n\r\nimport { NzAnchorLinkComponent } from './nz-anchor-link.component';\r\nimport { NzAnchorComponent } from './nz-anchor.component';\r\n\r\n@NgModule({\r\n  declarations: [NzAnchorComponent, NzAnchorLinkComponent],\r\n  exports: [NzAnchorComponent, NzAnchorLinkComponent],\r\n  imports: [CommonModule, NzAffixModule, PlatformModule],\r\n  providers: [SCROLL_SERVICE_PROVIDER]\r\n})\r\nexport class NzAnchorModule {}\r\n"]}