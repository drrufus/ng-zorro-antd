{"version":3,"file":"ng-zorro-antd-affix.js","sources":["ng://ng-zorro-antd/affix/utils.ts","ng://ng-zorro-antd/affix/nz-affix.component.ts","ng://ng-zorro-antd/affix/nz-affix.component.html","ng://ng-zorro-antd/affix/nz-affix.module.ts","ng://ng-zorro-antd/affix/public-api.ts","ng://ng-zorro-antd/affix/ng-zorro-antd-affix.ts"],"sourcesContent":["/**\r\n * @license\r\n * Copyright Alibaba.com All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\r\n */\r\n\r\nexport function isTargetWindow(target: Element | Window): target is Window {\r\n  return typeof window !== 'undefined' && target === window;\r\n}\r\n","/**\r\n * @license\r\n * Copyright Alibaba.com All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\r\n */\r\n\r\nimport { Platform } from '@angular/cdk/platform';\r\nimport { DOCUMENT } from '@angular/common';\r\nimport {\r\n  AfterViewInit,\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Inject,\r\n  Input,\r\n  NgZone,\r\n  OnChanges,\r\n  OnDestroy,\r\n  Output,\r\n  SimpleChanges,\r\n  ViewChild,\r\n  ViewEncapsulation\r\n} from '@angular/core';\r\n\r\nimport {\r\n  getStyleAsText,\r\n  InputNumber,\r\n  NgStyleInterface,\r\n  NzConfigService,\r\n  NzScrollService,\r\n  shallowEqual,\r\n  WithConfig\r\n} from 'ng-zorro-antd/core';\r\nimport { fromEvent, merge, Subscription } from 'rxjs';\r\nimport { auditTime } from 'rxjs/operators';\r\nimport { isTargetWindow } from './utils';\r\n\r\ninterface SimpleRect {\r\n  top: number;\r\n  left: number;\r\n  width?: number;\r\n  height?: number;\r\n  bottom?: number;\r\n}\r\n\r\nconst NZ_CONFIG_COMPONENT_NAME = 'affix';\r\nconst NZ_AFFIX_CLS_PREFIX = 'ant-affix';\r\nconst NZ_AFFIX_DEFAULT_SCROLL_TIME = 20;\r\nconst NZ_AFFIX_RESPOND_EVENTS = ['resize', 'scroll', 'touchstart', 'touchmove', 'touchend', 'pageshow', 'load'];\r\n\r\n@Component({\r\n  selector: 'nz-affix',\r\n  exportAs: 'nzAffix',\r\n  templateUrl: './nz-affix.component.html',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  styles: [\r\n    `\r\n      nz-affix {\r\n        display: block;\r\n      }\r\n    `\r\n  ],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class NzAffixComponent implements AfterViewInit, OnChanges, OnDestroy {\r\n  @ViewChild('fixedEl', { static: true }) private fixedEl: ElementRef<HTMLDivElement>;\r\n\r\n  @Input() nzTarget: string | Element | Window;\r\n\r\n  @Input()\r\n  @WithConfig<number | null>(NZ_CONFIG_COMPONENT_NAME, 0)\r\n  @InputNumber()\r\n  nzOffsetTop: null | number;\r\n\r\n  @Input()\r\n  @WithConfig<number | null>(NZ_CONFIG_COMPONENT_NAME, null)\r\n  @InputNumber()\r\n  nzOffsetBottom: null | number;\r\n\r\n  @Output() readonly nzChange = new EventEmitter<boolean>();\r\n\r\n  private readonly placeholderNode: HTMLElement;\r\n\r\n  private affixStyle?: NgStyleInterface;\r\n  private placeholderStyle?: NgStyleInterface;\r\n  private scroll$: Subscription = Subscription.EMPTY;\r\n  private timeout?: number;\r\n  private document: Document;\r\n\r\n  private get target(): Element | Window {\r\n    const el = this.nzTarget;\r\n    return (typeof el === 'string' ? this.document.querySelector(el) : el) || window;\r\n  }\r\n\r\n  constructor(\r\n    el: ElementRef,\r\n    @Inject(DOCUMENT) doc: any, // tslint:disable-line no-any\r\n    public nzConfigService: NzConfigService,\r\n    private scrollSrv: NzScrollService,\r\n    private ngZone: NgZone,\r\n    private platform: Platform\r\n  ) {\r\n    // The wrapper would stay at the original position as a placeholder.\r\n    this.placeholderNode = el.nativeElement;\r\n    this.document = doc;\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    const { nzOffsetBottom, nzOffsetTop, nzTarget } = changes;\r\n\r\n    if (nzOffsetBottom || nzOffsetTop) {\r\n      this.updatePosition({} as Event);\r\n    }\r\n    if (nzTarget) {\r\n      this.registerListeners();\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.registerListeners();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.removeListeners();\r\n  }\r\n\r\n  private registerListeners(): void {\r\n    this.removeListeners();\r\n    this.scroll$ = this.ngZone.runOutsideAngular(() => {\r\n      return merge(...NZ_AFFIX_RESPOND_EVENTS.map(evName => fromEvent(this.target, evName)))\r\n        .pipe(auditTime(NZ_AFFIX_DEFAULT_SCROLL_TIME))\r\n        .subscribe(e => this.updatePosition(e));\r\n    });\r\n    this.timeout = setTimeout(() => this.updatePosition({} as Event));\r\n  }\r\n\r\n  private removeListeners(): void {\r\n    clearTimeout(this.timeout);\r\n    this.scroll$.unsubscribe();\r\n  }\r\n\r\n  getOffset(element: Element, target: Element | Window | undefined): SimpleRect {\r\n    const elemRect = element.getBoundingClientRect();\r\n    const targetRect = this.getTargetRect(target!);\r\n\r\n    const scrollTop = this.scrollSrv.getScroll(target, true);\r\n    const scrollLeft = this.scrollSrv.getScroll(target, false);\r\n\r\n    const docElem = this.document.body;\r\n    const clientTop = docElem.clientTop || 0;\r\n    const clientLeft = docElem.clientLeft || 0;\r\n\r\n    return {\r\n      top: elemRect.top - targetRect.top + scrollTop - clientTop,\r\n      left: elemRect.left - targetRect.left + scrollLeft - clientLeft,\r\n      width: elemRect.width,\r\n      height: elemRect.height\r\n    };\r\n  }\r\n\r\n  private getTargetRect(target: Element | Window): SimpleRect {\r\n    return !isTargetWindow(target)\r\n      ? target.getBoundingClientRect()\r\n      : {\r\n          top: 0,\r\n          left: 0,\r\n          bottom: 0\r\n        };\r\n  }\r\n\r\n  private setAffixStyle(e: Event, affixStyle?: NgStyleInterface): void {\r\n    const originalAffixStyle = this.affixStyle;\r\n    const isWindow = this.target === window;\r\n    if (e.type === 'scroll' && originalAffixStyle && affixStyle && isWindow) {\r\n      return;\r\n    }\r\n    if (shallowEqual(originalAffixStyle, affixStyle)) {\r\n      return;\r\n    }\r\n\r\n    const fixed = !!affixStyle;\r\n    const wrapEl = this.fixedEl.nativeElement;\r\n    wrapEl.style.cssText = getStyleAsText(affixStyle);\r\n    this.affixStyle = affixStyle;\r\n    if (fixed) {\r\n      wrapEl.classList.add(NZ_AFFIX_CLS_PREFIX);\r\n    } else {\r\n      wrapEl.classList.remove(NZ_AFFIX_CLS_PREFIX);\r\n    }\r\n\r\n    if ((affixStyle && !originalAffixStyle) || (!affixStyle && originalAffixStyle)) {\r\n      this.nzChange.emit(fixed);\r\n    }\r\n  }\r\n\r\n  private setPlaceholderStyle(placeholderStyle?: NgStyleInterface): void {\r\n    const originalPlaceholderStyle = this.placeholderStyle;\r\n    if (shallowEqual(placeholderStyle, originalPlaceholderStyle)) {\r\n      return;\r\n    }\r\n    this.placeholderNode.style.cssText = getStyleAsText(placeholderStyle);\r\n    this.placeholderStyle = placeholderStyle;\r\n  }\r\n\r\n  private syncPlaceholderStyle(e: Event): void {\r\n    if (!this.affixStyle) {\r\n      return;\r\n    }\r\n    this.placeholderNode.style.cssText = '';\r\n    this.placeholderStyle = undefined;\r\n    const styleObj = {\r\n      width: this.placeholderNode.offsetWidth,\r\n      height: this.fixedEl.nativeElement.offsetHeight\r\n    };\r\n    this.setAffixStyle(e, {\r\n      ...this.affixStyle,\r\n      ...styleObj\r\n    });\r\n    this.setPlaceholderStyle(styleObj);\r\n  }\r\n\r\n  updatePosition(e: Event): void {\r\n    if (!this.platform.isBrowser) {\r\n      return;\r\n    }\r\n\r\n    const targetNode = this.target;\r\n    let offsetTop = this.nzOffsetTop;\r\n    const scrollTop = this.scrollSrv.getScroll(targetNode, true);\r\n    const elemOffset = this.getOffset(this.placeholderNode, targetNode!);\r\n    const fixedNode = this.fixedEl.nativeElement;\r\n    const elemSize = {\r\n      width: fixedNode.offsetWidth,\r\n      height: fixedNode.offsetHeight\r\n    };\r\n    const offsetMode = {\r\n      top: false,\r\n      bottom: false\r\n    };\r\n    // Default to `offsetTop=0`.\r\n    if (typeof offsetTop !== 'number' && typeof this.nzOffsetBottom !== 'number') {\r\n      offsetMode.top = true;\r\n      offsetTop = 0;\r\n    } else {\r\n      offsetMode.top = typeof offsetTop === 'number';\r\n      offsetMode.bottom = typeof this.nzOffsetBottom === 'number';\r\n    }\r\n    const targetRect = this.getTargetRect(targetNode as Window);\r\n    const targetInnerHeight = (targetNode as Window).innerHeight || (targetNode as HTMLElement).clientHeight;\r\n    if (scrollTop >= elemOffset.top - (offsetTop as number) && offsetMode.top) {\r\n      const width = elemOffset.width;\r\n      const top = targetRect.top + (offsetTop as number);\r\n      this.setAffixStyle(e, {\r\n        position: 'fixed',\r\n        top,\r\n        left: targetRect.left + elemOffset.left,\r\n        maxHeight: `calc(100vh - ${top}px)`,\r\n        width\r\n      });\r\n      this.setPlaceholderStyle({\r\n        width,\r\n        height: elemSize.height\r\n      });\r\n    } else if (scrollTop <= elemOffset.top + elemSize.height + (this.nzOffsetBottom as number) - targetInnerHeight && offsetMode.bottom) {\r\n      const targetBottomOffet = targetNode === window ? 0 : window.innerHeight - targetRect.bottom!;\r\n      const width = elemOffset.width;\r\n      this.setAffixStyle(e, {\r\n        position: 'fixed',\r\n        bottom: targetBottomOffet + (this.nzOffsetBottom as number),\r\n        left: targetRect.left + elemOffset.left,\r\n        width\r\n      });\r\n      this.setPlaceholderStyle({\r\n        width,\r\n        height: elemOffset.height\r\n      });\r\n    } else {\r\n      if (e.type === 'resize' && this.affixStyle && this.affixStyle.position === 'fixed' && this.placeholderNode.offsetWidth) {\r\n        this.setAffixStyle(e, {\r\n          ...this.affixStyle,\r\n          width: this.placeholderNode.offsetWidth\r\n        });\r\n      } else {\r\n        this.setAffixStyle(e);\r\n      }\r\n      this.setPlaceholderStyle();\r\n    }\r\n\r\n    if (e.type === 'resize') {\r\n      this.syncPlaceholderStyle(e);\r\n    }\r\n  }\r\n}\r\n","<div #fixedEl>\r\n  <ng-content></ng-content>\r\n</div>\r\n","/**\r\n * @license\r\n * Copyright Alibaba.com All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\r\n */\r\nimport { PlatformModule } from '@angular/cdk/platform';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { SCROLL_SERVICE_PROVIDER } from 'ng-zorro-antd/core';\r\n\r\nimport { NzAffixComponent } from './nz-affix.component';\r\n\r\n@NgModule({\r\n  declarations: [NzAffixComponent],\r\n  exports: [NzAffixComponent],\r\n  imports: [CommonModule, PlatformModule],\r\n  providers: [SCROLL_SERVICE_PROVIDER]\r\n})\r\nexport class NzAffixModule {}\r\n","/**\r\n * @license\r\n * Copyright Alibaba.com All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\r\n */\r\n\r\nexport * from './nz-affix.component';\r\nexport * from './nz-affix.module';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i0.ɵɵelementStart","i0.ɵɵprojection","i0.ɵɵelementEnd"],"mappings":";;;;;;;;AAAA;;;;;;;AAQA,SAAgB,cAAc,CAAC,MAAwB;IACrD,OAAO,OAAO,MAAM,KAAK,WAAW,IAAI,MAAM,KAAK,MAAM,CAAC;CAC3D;;;;ACsCD,MAAM,wBAAwB,GAAG,OAAO,CAAC;AACzC,MAAM,mBAAmB,GAAG,WAAW,CAAC;AACxC,MAAM,4BAA4B,GAAG,EAAE,CAAC;AACxC,MAAM,uBAAuB,GAAG,CAAC,QAAQ,EAAE,QAAQ,EAAE,YAAY,EAAE,WAAW,EAAE,UAAU,EAAE,UAAU,EAAE,MAAM,CAAC,CAAC;AAgBhH,MAAa,gBAAgB;IA8B3B,YACE,EAAc,EACI,GAAQ;IACnB,eAAgC,EAC/B,SAA0B,EAC1B,MAAc,EACd,QAAkB;QAHnB,oBAAe,GAAf,eAAe,CAAiB;QAC/B,cAAS,GAAT,SAAS,CAAiB;QAC1B,WAAM,GAAN,MAAM,CAAQ;QACd,aAAQ,GAAR,QAAQ,CAAU;QArBT,aAAQ,GAAG,IAAI,YAAY,EAAW,CAAC;QAMlD,YAAO,GAAiB,YAAY,CAAC,KAAK,CAAC;;QAkBjD,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC,aAAa,CAAC;QACxC,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;KACrB;IAhBD,IAAY,MAAM;QAChB,MAAM,EAAE,GAAG,IAAI,CAAC,QAAQ,CAAC;QACzB,OAAO,CAAC,OAAO,EAAE,KAAK,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,EAAE,CAAC,GAAG,EAAE,KAAK,MAAM,CAAC;KAClF;IAeD,WAAW,CAAC,OAAsB;QAChC,MAAM,EAAE,cAAc,EAAE,WAAW,EAAE,QAAQ,EAAE,GAAG,OAAO,CAAC;QAE1D,IAAI,cAAc,IAAI,WAAW,EAAE;YACjC,IAAI,CAAC,cAAc,CAAC,EAAW,CAAC,CAAC;SAClC;QACD,IAAI,QAAQ,EAAE;YACZ,IAAI,CAAC,iBAAiB,EAAE,CAAC;SAC1B;KACF;IAED,eAAe;QACb,IAAI,CAAC,iBAAiB,EAAE,CAAC;KAC1B;IAED,WAAW;QACT,IAAI,CAAC,eAAe,EAAE,CAAC;KACxB;IAEO,iBAAiB;QACvB,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC;YAC3C,OAAO,KAAK,CAAC,GAAG,uBAAuB,CAAC,GAAG,CAAC,MAAM,IAAI,SAAS,CAAC,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC,CAAC;iBACnF,IAAI,CAAC,SAAS,CAAC,4BAA4B,CAAC,CAAC;iBAC7C,SAAS,CAAC,CAAC,IAAI,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;SAC3C,CAAC,CAAC;QACH,IAAI,CAAC,OAAO,GAAG,UAAU,CAAC,MAAM,IAAI,CAAC,cAAc,CAAC,EAAW,CAAC,CAAC,CAAC;KACnE;IAEO,eAAe;QACrB,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC3B,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;KAC5B;IAED,SAAS,CAAC,OAAgB,EAAE,MAAoC;QAC9D,MAAM,QAAQ,GAAG,OAAO,CAAC,qBAAqB,EAAE,CAAC;QACjD,MAAM,UAAU,GAAG,IAAI,CAAC,aAAa,CAAC,MAAO,CAAC,CAAC;QAE/C,MAAM,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;QACzD,MAAM,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;QAE3D,MAAM,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC;QACnC,MAAM,SAAS,GAAG,OAAO,CAAC,SAAS,IAAI,CAAC,CAAC;QACzC,MAAM,UAAU,GAAG,OAAO,CAAC,UAAU,IAAI,CAAC,CAAC;QAE3C,OAAO;YACL,GAAG,EAAE,QAAQ,CAAC,GAAG,GAAG,UAAU,CAAC,GAAG,GAAG,SAAS,GAAG,SAAS;YAC1D,IAAI,EAAE,QAAQ,CAAC,IAAI,GAAG,UAAU,CAAC,IAAI,GAAG,UAAU,GAAG,UAAU;YAC/D,KAAK,EAAE,QAAQ,CAAC,KAAK;YACrB,MAAM,EAAE,QAAQ,CAAC,MAAM;SACxB,CAAC;KACH;IAEO,aAAa,CAAC,MAAwB;QAC5C,OAAO,CAAC,cAAc,CAAC,MAAM,CAAC;cAC1B,MAAM,CAAC,qBAAqB,EAAE;cAC9B;gBACE,GAAG,EAAE,CAAC;gBACN,IAAI,EAAE,CAAC;gBACP,MAAM,EAAE,CAAC;aACV,CAAC;KACP;IAEO,aAAa,CAAC,CAAQ,EAAE,UAA6B;QAC3D,MAAM,kBAAkB,GAAG,IAAI,CAAC,UAAU,CAAC;QAC3C,MAAM,QAAQ,GAAG,IAAI,CAAC,MAAM,KAAK,MAAM,CAAC;QACxC,IAAI,CAAC,CAAC,IAAI,KAAK,QAAQ,IAAI,kBAAkB,IAAI,UAAU,IAAI,QAAQ,EAAE;YACvE,OAAO;SACR;QACD,IAAI,YAAY,CAAC,kBAAkB,EAAE,UAAU,CAAC,EAAE;YAChD,OAAO;SACR;QAED,MAAM,KAAK,GAAG,CAAC,CAAC,UAAU,CAAC;QAC3B,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC;QAC1C,MAAM,CAAC,KAAK,CAAC,OAAO,GAAG,cAAc,CAAC,UAAU,CAAC,CAAC;QAClD,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAC7B,IAAI,KAAK,EAAE;YACT,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;SAC3C;aAAM;YACL,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAAC;SAC9C;QAED,IAAI,CAAC,UAAU,IAAI,CAAC,kBAAkB,MAAM,CAAC,UAAU,IAAI,kBAAkB,CAAC,EAAE;YAC9E,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SAC3B;KACF;IAEO,mBAAmB,CAAC,gBAAmC;QAC7D,MAAM,wBAAwB,GAAG,IAAI,CAAC,gBAAgB,CAAC;QACvD,IAAI,YAAY,CAAC,gBAAgB,EAAE,wBAAwB,CAAC,EAAE;YAC5D,OAAO;SACR;QACD,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,OAAO,GAAG,cAAc,CAAC,gBAAgB,CAAC,CAAC;QACtE,IAAI,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;KAC1C;IAEO,oBAAoB,CAAC,CAAQ;QACnC,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YACpB,OAAO;SACR;QACD,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,OAAO,GAAG,EAAE,CAAC;QACxC,IAAI,CAAC,gBAAgB,GAAG,SAAS,CAAC;QAClC,MAAM,QAAQ,GAAG;YACf,KAAK,EAAE,IAAI,CAAC,eAAe,CAAC,WAAW;YACvC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,YAAY;SAChD,CAAC;QACF,IAAI,CAAC,aAAa,CAAC,CAAC,kCACf,IAAI,CAAC,UAAU,GACf,QAAQ,EACX,CAAC;QACH,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,CAAC;KACpC;IAED,cAAc,CAAC,CAAQ;QACrB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE;YAC5B,OAAO;SACR;QAED,MAAM,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC;QAC/B,IAAI,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC;QACjC,MAAM,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;QAC7D,MAAM,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,eAAe,EAAE,UAAW,CAAC,CAAC;QACrE,MAAM,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC;QAC7C,MAAM,QAAQ,GAAG;YACf,KAAK,EAAE,SAAS,CAAC,WAAW;YAC5B,MAAM,EAAE,SAAS,CAAC,YAAY;SAC/B,CAAC;QACF,MAAM,UAAU,GAAG;YACjB,GAAG,EAAE,KAAK;YACV,MAAM,EAAE,KAAK;SACd,CAAC;;QAEF,IAAI,OAAO,SAAS,KAAK,QAAQ,IAAI,OAAO,IAAI,CAAC,cAAc,KAAK,QAAQ,EAAE;YAC5E,UAAU,CAAC,GAAG,GAAG,IAAI,CAAC;YACtB,SAAS,GAAG,CAAC,CAAC;SACf;aAAM;YACL,UAAU,CAAC,GAAG,GAAG,OAAO,SAAS,KAAK,QAAQ,CAAC;YAC/C,UAAU,CAAC,MAAM,GAAG,OAAO,IAAI,CAAC,cAAc,KAAK,QAAQ,CAAC;SAC7D;QACD,MAAM,UAAU,GAAG,IAAI,CAAC,aAAa,CAAC,UAAoB,CAAC,CAAC;QAC5D,MAAM,iBAAiB,GAAI,UAAqB,CAAC,WAAW,IAAK,UAA0B,CAAC,YAAY,CAAC;QACzG,IAAI,SAAS,IAAI,UAAU,CAAC,GAAG,GAAI,SAAoB,IAAI,UAAU,CAAC,GAAG,EAAE;YACzE,MAAM,KAAK,GAAG,UAAU,CAAC,KAAK,CAAC;YAC/B,MAAM,GAAG,GAAG,UAAU,CAAC,GAAG,GAAI,SAAoB,CAAC;YACnD,IAAI,CAAC,aAAa,CAAC,CAAC,EAAE;gBACpB,QAAQ,EAAE,OAAO;gBACjB,GAAG;gBACH,IAAI,EAAE,UAAU,CAAC,IAAI,GAAG,UAAU,CAAC,IAAI;gBACvC,SAAS,EAAE,gBAAgB,GAAG,KAAK;gBACnC,KAAK;aACN,CAAC,CAAC;YACH,IAAI,CAAC,mBAAmB,CAAC;gBACvB,KAAK;gBACL,MAAM,EAAE,QAAQ,CAAC,MAAM;aACxB,CAAC,CAAC;SACJ;aAAM,IAAI,SAAS,IAAI,UAAU,CAAC,GAAG,GAAG,QAAQ,CAAC,MAAM,GAAI,IAAI,CAAC,cAAyB,GAAG,iBAAiB,IAAI,UAAU,CAAC,MAAM,EAAE;YACnI,MAAM,iBAAiB,GAAG,UAAU,KAAK,MAAM,GAAG,CAAC,GAAG,MAAM,CAAC,WAAW,GAAG,UAAU,CAAC,MAAO,CAAC;YAC9F,MAAM,KAAK,GAAG,UAAU,CAAC,KAAK,CAAC;YAC/B,IAAI,CAAC,aAAa,CAAC,CAAC,EAAE;gBACpB,QAAQ,EAAE,OAAO;gBACjB,MAAM,EAAE,iBAAiB,GAAI,IAAI,CAAC,cAAyB;gBAC3D,IAAI,EAAE,UAAU,CAAC,IAAI,GAAG,UAAU,CAAC,IAAI;gBACvC,KAAK;aACN,CAAC,CAAC;YACH,IAAI,CAAC,mBAAmB,CAAC;gBACvB,KAAK;gBACL,MAAM,EAAE,UAAU,CAAC,MAAM;aAC1B,CAAC,CAAC;SACJ;aAAM;YACL,IAAI,CAAC,CAAC,IAAI,KAAK,QAAQ,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,QAAQ,KAAK,OAAO,IAAI,IAAI,CAAC,eAAe,CAAC,WAAW,EAAE;gBACtH,IAAI,CAAC,aAAa,CAAC,CAAC,kCACf,IAAI,CAAC,UAAU,KAClB,KAAK,EAAE,IAAI,CAAC,eAAe,CAAC,WAAW,IACvC,CAAC;aACJ;iBAAM;gBACL,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;aACvB;YACD,IAAI,CAAC,mBAAmB,EAAE,CAAC;SAC5B;QAED,IAAI,CAAC,CAAC,IAAI,KAAK,QAAQ,EAAE;YACvB,IAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC;SAC9B;KACF;;gFAnOU;;;;;;;;QCnEbA,iCACE;QAAAC,eAAY;QACdC,cAAM;;ADyEJ;IAFC,UAAU,CAAgB,wBAAwB,EAAE,CAAC,CAAC;IACtD,WAAW,EAAE;;qDACa;AAK3B;IAFC,UAAU,CAAgB,wBAAwB,EAAE,IAAI,CAAC;IACzD,WAAW,EAAE;;wDACgB;+CAbnB,gBAAgB;cAd5B,SAAS;eAAC;gBACT,QAAQ,EAAE,UAAU;gBACpB,QAAQ,EAAE,SAAS;gBACnB,WAAW,EAAE,2BAA2B;gBACxC,eAAe,EAAE,uBAAuB,CAAC,MAAM;gBAC/C,MAAM,EAAE;oBACN;;;;KAIC;iBACF;gBACD,aAAa,EAAE,iBAAiB,CAAC,IAAI;aACtC;;sBAiCI,MAAM;uBAAC,QAAQ;;kBA/BjB,SAAS;mBAAC,SAAS,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE;;kBAErC,KAAK;;kBAEL,KAAK;;kBAKL,KAAK;;kBAKL,MAAM;;;AElFT;;;;;;;AAOA,MAaa,aAAa;;2DAAA;sGAAb,gCAFA;qFAEA,aAAa,mBALT,gBAAgB,aAErB,YAAY,EAAE,cAAc,aAD5B,gBAAgB;+CAIf,aAAa;cANzB,QAAQ;eAAC;gBACR,YAAY,EAAE,CAAC,gBAAgB,CAAC;gBAChC,OAAO,EAAE,CAAC,gBAAgB,CAAC;gBAC3B,OAAO,EAAE,CAAC,YAAY,EAAE,cAAc,CAAC;gBACvC,SAAS,EAAE,CAAC,uBAAuB,CAAC;aACrC;;;ACnBD;;;;;;GAMG;;ACNH;;GAEG;;;;"}