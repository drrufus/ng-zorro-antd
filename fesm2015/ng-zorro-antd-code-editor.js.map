{"version":3,"file":"ng-zorro-antd-code-editor.js","sources":["ng://ng-zorro-antd/code-editor/nz-code-editor.definitions.ts","ng://ng-zorro-antd/code-editor/nz-code-editor.service.ts","ng://ng-zorro-antd/code-editor/nz-code-editor.component.html","ng://ng-zorro-antd/code-editor/nz-code-editor.component.ts","ng://ng-zorro-antd/code-editor/nz-code-editor.module.ts","ng://ng-zorro-antd/code-editor/public-api.ts","ng://ng-zorro-antd/code-editor/ng-zorro-antd-code-editor.ts"],"sourcesContent":["/**\r\n * @license\r\n * Copyright Alibaba.com All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\r\n */\r\n\r\nimport { InjectionToken } from '@angular/core';\r\nimport { SafeUrl } from '@angular/platform-browser';\r\nimport { editor } from 'monaco-editor';\r\nimport IEditorConstructionOptions = editor.IEditorConstructionOptions;\r\nimport IDiffEditorConstructionOptions = editor.IDiffEditorConstructionOptions;\r\n\r\nexport type EditorOptions = IEditorConstructionOptions;\r\nexport type DiffEditorOptions = IDiffEditorConstructionOptions;\r\nexport type JoinedEditorOptions = EditorOptions | DiffEditorOptions;\r\n\r\nexport type NzEditorMode = 'normal' | 'diff';\r\n\r\nexport enum NzCodeEditorLoadingStatus {\r\n  UNLOAD = 'unload',\r\n  LOADING = 'loading',\r\n  LOADED = 'LOADED'\r\n}\r\n\r\nexport interface NzCodeEditorConfig {\r\n  assetsRoot?: string | SafeUrl;\r\n  defaultEditorOption?: JoinedEditorOptions;\r\n  useStaticLoading?: boolean;\r\n\r\n  onLoad?(): void;\r\n  onFirstEditorInit?(): void;\r\n  onInit?(): void;\r\n}\r\n\r\nexport const NZ_CODE_EDITOR_CONFIG = new InjectionToken<NzCodeEditorConfig>('nz-code-editor-config', {\r\n  providedIn: 'root',\r\n  factory: NZ_CODE_EDITOR_CONFIG_FACTORY\r\n});\r\n\r\nexport function NZ_CODE_EDITOR_CONFIG_FACTORY(): NzCodeEditorConfig {\r\n  return {};\r\n}\r\n","/**\r\n * @license\r\n * Copyright Alibaba.com All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\r\n */\r\n\r\nimport { DOCUMENT } from '@angular/common';\r\nimport { Inject, Injectable, Optional } from '@angular/core';\r\nimport { BehaviorSubject, Observable, of as observableOf, Subject } from 'rxjs';\r\nimport { map, tap } from 'rxjs/operators';\r\n\r\nimport { NzConfigService, PREFIX, warn, warnDeprecation } from 'ng-zorro-antd/core';\r\nimport { JoinedEditorOptions, NZ_CODE_EDITOR_CONFIG, NzCodeEditorConfig, NzCodeEditorLoadingStatus } from './nz-code-editor.definitions';\r\n\r\n// tslint:disable-next-line no-any\r\ndeclare const monaco: any;\r\n\r\nconst NZ_CONFIG_COMPONENT_NAME = 'codeEditor';\r\n\r\n// tslint:disable no-any\r\nfunction tryTriggerFunc(fn?: (...args: any[]) => any): (...args: any) => void {\r\n  return (...args: any[]) => {\r\n    if (fn) {\r\n      fn(...args);\r\n    }\r\n  };\r\n}\r\n// tslint:enable no-any\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class NzCodeEditorService {\r\n  private document: Document;\r\n  private firstEditorInitialized = false;\r\n  private loaded$ = new Subject<boolean>();\r\n  private loadingStatus = NzCodeEditorLoadingStatus.UNLOAD;\r\n  private option: JoinedEditorOptions;\r\n  private config: NzCodeEditorConfig;\r\n\r\n  option$ = new BehaviorSubject<JoinedEditorOptions>(this.option);\r\n\r\n  constructor(\r\n    private readonly nzConfigService: NzConfigService,\r\n    @Inject(DOCUMENT) _document: any, // tslint:disable-line no-any\r\n    @Inject(NZ_CODE_EDITOR_CONFIG) @Optional() config?: NzCodeEditorConfig\r\n  ) {\r\n    const globalConfig = this.nzConfigService.getConfigForComponent(NZ_CONFIG_COMPONENT_NAME);\r\n\r\n    if (config) {\r\n      warnDeprecation(\r\n        `'NZ_CODE_EDITOR_CONFIG' is deprecated and will be removed in next minor version. Please use 'NzConfigService' instead.`\r\n      );\r\n    }\r\n\r\n    this.document = _document;\r\n    this.config = { ...config, ...globalConfig };\r\n    this.option = this.config.defaultEditorOption || {};\r\n\r\n    this.nzConfigService.getConfigChangeEventForComponent(NZ_CONFIG_COMPONENT_NAME).subscribe(() => {\r\n      const newGlobalConfig = this.nzConfigService.getConfigForComponent(NZ_CONFIG_COMPONENT_NAME);\r\n      if (newGlobalConfig) {\r\n        this._updateDefaultOption(newGlobalConfig.defaultEditorOption);\r\n      }\r\n    });\r\n  }\r\n\r\n  updateDefaultOption(option: JoinedEditorOptions): void {\r\n    warnDeprecation(\r\n      `'updateDefaultOption' is deprecated and will be removed in next minor version. Please use 'set' of 'NzConfigService' instead.`\r\n    );\r\n\r\n    this._updateDefaultOption(option);\r\n  }\r\n\r\n  private _updateDefaultOption(option: JoinedEditorOptions): void {\r\n    this.option = { ...this.option, ...option };\r\n    this.option$.next(this.option);\r\n\r\n    if (option.theme) {\r\n      monaco.editor.setTheme(option.theme);\r\n    }\r\n  }\r\n\r\n  requestToInit(): Observable<JoinedEditorOptions> {\r\n    if (this.loadingStatus === NzCodeEditorLoadingStatus.LOADED) {\r\n      this.onInit();\r\n      return observableOf(this.getLatestOption());\r\n    }\r\n\r\n    if (this.loadingStatus === NzCodeEditorLoadingStatus.UNLOAD) {\r\n      if (this.config.useStaticLoading && typeof monaco === 'undefined') {\r\n        warn(\r\n          'You choose to use static loading but it seems that you forget ' +\r\n            'to config webpack plugin correctly. Please refer to our official website' +\r\n            'for more details about static loading.'\r\n        );\r\n      } else {\r\n        this.loadMonacoScript();\r\n      }\r\n    }\r\n\r\n    return this.loaded$.asObservable().pipe(\r\n      tap(() => this.onInit()),\r\n      map(() => this.getLatestOption())\r\n    );\r\n  }\r\n\r\n  private loadMonacoScript(): void {\r\n    if (this.config.useStaticLoading) {\r\n      this.onLoad();\r\n      return;\r\n    }\r\n\r\n    if (this.loadingStatus === NzCodeEditorLoadingStatus.LOADING) {\r\n      return;\r\n    }\r\n\r\n    this.loadingStatus = NzCodeEditorLoadingStatus.LOADING;\r\n\r\n    const assetsRoot = this.config.assetsRoot;\r\n    const vs = assetsRoot ? `${assetsRoot}/vs` : 'assets/vs';\r\n    const windowAsAny = window as any; // tslint:disable-line no-any\r\n    const loadScript = this.document.createElement('script');\r\n\r\n    loadScript.type = 'text/javascript';\r\n    loadScript.src = `${vs}/loader.js`;\r\n    loadScript.onload = () => {\r\n      windowAsAny.require.config({\r\n        paths: { vs }\r\n      });\r\n      windowAsAny.require(['vs/editor/editor.main'], () => {\r\n        this.onLoad();\r\n      });\r\n    };\r\n    loadScript.onerror = () => {\r\n      throw new Error(`${PREFIX} cannot load assets of monaco editor from source \"${vs}\".`);\r\n    };\r\n\r\n    this.document.documentElement.appendChild(loadScript);\r\n  }\r\n\r\n  private onLoad(): void {\r\n    this.loadingStatus = NzCodeEditorLoadingStatus.LOADED;\r\n    this.loaded$.next(true);\r\n    this.loaded$.complete();\r\n\r\n    tryTriggerFunc(this.config.onLoad)();\r\n  }\r\n\r\n  private onInit(): void {\r\n    if (!this.firstEditorInitialized) {\r\n      this.firstEditorInitialized = true;\r\n      tryTriggerFunc(this.config.onFirstEditorInit)();\r\n    }\r\n\r\n    tryTriggerFunc(this.config.onInit)();\r\n  }\r\n\r\n  private getLatestOption(): JoinedEditorOptions {\r\n    return { ...this.option };\r\n  }\r\n}\r\n","<div class=\"ant-code-editor-loading\" *ngIf=\"nzLoading\">\r\n  <nz-spin></nz-spin>\r\n</div>\r\n\r\n<div class=\"ant-code-editor-toolkit\" *ngIf=\"nzToolkit\">\r\n  <ng-template [ngTemplateOutlet]=\"nzToolkit\"></ng-template>\r\n</div>\r\n","/**\r\n * @license\r\n * Copyright Alibaba.com All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\r\n */\r\n\r\nimport {\r\n  AfterViewInit,\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  forwardRef,\r\n  Input,\r\n  NgZone,\r\n  OnDestroy,\r\n  Output,\r\n  TemplateRef,\r\n  ViewEncapsulation\r\n} from '@angular/core';\r\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\r\nimport { BehaviorSubject, combineLatest, fromEvent, Subject } from 'rxjs';\r\nimport { debounceTime, distinctUntilChanged, filter, map, takeUntil } from 'rxjs/operators';\r\n\r\nimport { inNextTick, InputBoolean, warn } from 'ng-zorro-antd/core';\r\n\r\nimport { DiffEditorOptions, EditorOptions, JoinedEditorOptions, NzEditorMode } from './nz-code-editor.definitions';\r\nimport { NzCodeEditorService } from './nz-code-editor.service';\r\n\r\n// Import types from monaco editor.\r\nimport { editor } from 'monaco-editor';\r\nimport IEditor = editor.IEditor;\r\nimport IDiffEditor = editor.IDiffEditor;\r\nimport ITextModel = editor.ITextModel;\r\n\r\n// tslint:disable-next-line no-any\r\ndeclare const monaco: any;\r\n\r\n@Component({\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  encapsulation: ViewEncapsulation.None,\r\n  selector: 'nz-code-editor',\r\n  exportAs: 'nzCodeEditor',\r\n  templateUrl: './nz-code-editor.component.html',\r\n  host: {\r\n    '[class.ant-code-editor]': 'true'\r\n  },\r\n  providers: [\r\n    {\r\n      provide: NG_VALUE_ACCESSOR,\r\n      useExisting: forwardRef(() => NzCodeEditorComponent),\r\n      multi: true\r\n    }\r\n  ]\r\n})\r\nexport class NzCodeEditorComponent implements OnDestroy, AfterViewInit {\r\n  @Input() nzEditorMode: NzEditorMode = 'normal';\r\n  @Input() nzOriginalText = '';\r\n  @Input() @InputBoolean() nzLoading = false;\r\n  @Input() @InputBoolean() nzFullControl = false;\r\n  @Input() nzToolkit: TemplateRef<void>;\r\n\r\n  @Input() set nzEditorOption(value: JoinedEditorOptions) {\r\n    this.editorOption$.next(value);\r\n  }\r\n\r\n  @Output() readonly nzEditorInitialized = new EventEmitter<IEditor | IDiffEditor>();\r\n\r\n  editorOptionCached: JoinedEditorOptions = {};\r\n\r\n  private readonly el: HTMLElement;\r\n  private destroy$ = new Subject<void>();\r\n  private resize$ = new Subject<void>();\r\n  private editorOption$ = new BehaviorSubject<JoinedEditorOptions>({});\r\n  private editorInstance: IEditor | IDiffEditor;\r\n  private value = '';\r\n  private modelSet = false;\r\n\r\n  constructor(private nzCodeEditorService: NzCodeEditorService, private ngZone: NgZone, elementRef: ElementRef) {\r\n    this.el = elementRef.nativeElement;\r\n  }\r\n\r\n  /**\r\n   * Initialize a monaco editor instance.\r\n   */\r\n  ngAfterViewInit(): void {\r\n    this.nzCodeEditorService.requestToInit().subscribe(option => this.setup(option));\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.editorInstance) {\r\n      this.editorInstance.dispose();\r\n    }\r\n\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  writeValue(value: string): void {\r\n    this.value = value;\r\n    this.setValue();\r\n  }\r\n\r\n  // tslint:disable-next-line no-any\r\n  registerOnChange(fn: (value: string) => void): any {\r\n    this.onChange = fn;\r\n  }\r\n\r\n  // tslint:disable-next-line no-any\r\n  registerOnTouched(fn: any): void {\r\n    this.onTouch = fn;\r\n  }\r\n\r\n  onChange(_value: string): void {}\r\n\r\n  onTouch(): void {}\r\n\r\n  layout(): void {\r\n    this.resize$.next();\r\n  }\r\n\r\n  private setup(option: JoinedEditorOptions): void {\r\n    inNextTick().subscribe(() => {\r\n      this.editorOptionCached = option;\r\n      this.registerOptionChanges();\r\n      this.initMonacoEditorInstance();\r\n      this.registerResizeChange();\r\n      this.setValue();\r\n\r\n      if (!this.nzFullControl) {\r\n        this.setValueEmitter();\r\n      }\r\n\r\n      this.nzEditorInitialized.emit(this.editorInstance);\r\n    });\r\n  }\r\n\r\n  private registerOptionChanges(): void {\r\n    combineLatest([this.editorOption$, this.nzCodeEditorService.option$])\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe(([selfOpt, defaultOpt]) => {\r\n        this.editorOptionCached = {\r\n          ...this.editorOptionCached,\r\n          ...defaultOpt,\r\n          ...selfOpt\r\n        };\r\n        this.updateOptionToMonaco();\r\n      });\r\n  }\r\n\r\n  private initMonacoEditorInstance(): void {\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this.editorInstance =\r\n        this.nzEditorMode === 'normal'\r\n          ? monaco.editor.create(this.el, { ...this.editorOptionCached })\r\n          : monaco.editor.createDiffEditor(this.el, {\r\n              ...(this.editorOptionCached as DiffEditorOptions)\r\n            });\r\n    });\r\n  }\r\n\r\n  private registerResizeChange(): void {\r\n    this.ngZone.runOutsideAngular(() => {\r\n      fromEvent(window, 'resize')\r\n        .pipe(debounceTime(300), takeUntil(this.destroy$))\r\n        .subscribe(() => {\r\n          this.layout();\r\n        });\r\n\r\n      this.resize$\r\n        .pipe(\r\n          takeUntil(this.destroy$),\r\n          filter(() => !!this.editorInstance),\r\n          map(() => ({\r\n            width: this.el.clientWidth,\r\n            height: this.el.clientHeight\r\n          })),\r\n          distinctUntilChanged((a, b) => a.width === b.width && a.height === b.height),\r\n          debounceTime(50)\r\n        )\r\n        .subscribe(() => {\r\n          this.editorInstance.layout();\r\n        });\r\n    });\r\n  }\r\n\r\n  private setValue(): void {\r\n    if (!this.editorInstance) {\r\n      return;\r\n    }\r\n\r\n    if (this.nzFullControl && this.value) {\r\n      warn(`should not set value when you are using full control mode! It would result in ambiguous data flow!`);\r\n      return;\r\n    }\r\n\r\n    if (this.nzEditorMode === 'normal') {\r\n      if (this.modelSet) {\r\n        (this.editorInstance.getModel() as ITextModel).setValue(this.value);\r\n      } else {\r\n        (this.editorInstance as IEditor).setModel(\r\n          monaco.editor.createModel(this.value, (this.editorOptionCached as EditorOptions).language)\r\n        );\r\n        this.modelSet = true;\r\n      }\r\n    } else {\r\n      if (this.modelSet) {\r\n        const model = (this.editorInstance as IDiffEditor).getModel()!;\r\n        model.modified.setValue(this.value);\r\n        model.original.setValue(this.nzOriginalText);\r\n      } else {\r\n        const language = (this.editorOptionCached as EditorOptions).language;\r\n        (this.editorInstance as IDiffEditor).setModel({\r\n          original: monaco.editor.createModel(this.value, language),\r\n          modified: monaco.editor.createModel(this.nzOriginalText, language)\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  private setValueEmitter(): void {\r\n    const model = (this.nzEditorMode === 'normal'\r\n      ? (this.editorInstance as IEditor).getModel()\r\n      : (this.editorInstance as IDiffEditor).getModel()!.modified) as ITextModel;\r\n\r\n    model.onDidChangeContent(() => {\r\n      this.emitValue(model.getValue());\r\n    });\r\n  }\r\n\r\n  private emitValue(value: string): void {\r\n    this.value = value;\r\n    this.onChange(value);\r\n  }\r\n\r\n  private updateOptionToMonaco(): void {\r\n    if (this.editorInstance) {\r\n      this.editorInstance.updateOptions({ ...this.editorOptionCached });\r\n    }\r\n  }\r\n}\r\n","/**\r\n * @license\r\n * Copyright Alibaba.com All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\r\n */\r\n\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\n\r\nimport { NzIconModule } from 'ng-zorro-antd/icon';\r\nimport { NzSpinModule } from 'ng-zorro-antd/spin';\r\n\r\nimport { NzCodeEditorComponent } from './nz-code-editor.component';\r\n\r\n@NgModule({\r\n  declarations: [NzCodeEditorComponent],\r\n  imports: [CommonModule, NzIconModule, NzSpinModule],\r\n  exports: [NzCodeEditorComponent]\r\n})\r\nexport class NzCodeEditorModule {}\r\n","/**\r\n * @license\r\n * Copyright Alibaba.com All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\r\n */\r\n\r\nexport * from './nz-code-editor.definitions';\r\nexport * from './nz-code-editor.component';\r\nexport * from './nz-code-editor.module';\r\nexport * from './nz-code-editor.service';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["observableOf","i0.ɵɵelementStart","i0.ɵɵelement","i0.ɵɵelementEnd","i0.ɵɵtemplate","i0.ɵɵadvance","i0.ɵɵproperty"],"mappings":"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"}