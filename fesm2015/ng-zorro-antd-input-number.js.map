{"version":3,"file":"ng-zorro-antd-input-number.js","sources":["ng://ng-zorro-antd/input-number/nz-input-number.component.ts","ng://ng-zorro-antd/input-number/nz-input-number.component.html","ng://ng-zorro-antd/input-number/nz-input-number.module.ts","ng://ng-zorro-antd/input-number/public-api.ts","ng://ng-zorro-antd/input-number/ng-zorro-antd-input-number.ts"],"sourcesContent":["/**\r\n * @license\r\n * Copyright Alibaba.com All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\r\n */\r\n\r\nimport { FocusMonitor } from '@angular/cdk/a11y';\r\nimport { DOWN_ARROW, ENTER, UP_ARROW } from '@angular/cdk/keycodes';\r\nimport {\r\n  AfterViewInit,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  forwardRef,\r\n  Input,\r\n  OnChanges,\r\n  OnDestroy,\r\n  OnInit,\r\n  Output,\r\n  Renderer2,\r\n  SimpleChanges,\r\n  ViewChild,\r\n  ViewEncapsulation\r\n} from '@angular/core';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\r\n\r\nimport { InputBoolean, isNotNil, NzSizeLDSType } from 'ng-zorro-antd/core';\r\n\r\n@Component({\r\n  selector: 'nz-input-number',\r\n  exportAs: 'nzInputNumber',\r\n  templateUrl: './nz-input-number.component.html',\r\n  providers: [\r\n    {\r\n      provide: NG_VALUE_ACCESSOR,\r\n      useExisting: forwardRef(() => NzInputNumberComponent),\r\n      multi: true\r\n    }\r\n  ],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  encapsulation: ViewEncapsulation.None,\r\n  host: {\r\n    '[class.ant-input-number-focused]': 'isFocused',\r\n    '[class.ant-input-number-lg]': `nzSize === 'large'`,\r\n    '[class.ant-input-number-sm]': `nzSize === 'small'`,\r\n    '[class.ant-input-number-disabled]': 'nzDisabled'\r\n  }\r\n})\r\nexport class NzInputNumberComponent implements ControlValueAccessor, AfterViewInit, OnChanges, OnInit, OnDestroy {\r\n  private autoStepTimer: number;\r\n  public actualValue: string | number;\r\n  private value: string | number;\r\n  displayValue: string | number;\r\n  isFocused = false;\r\n  disabledUp = false;\r\n  disabledDown = false;\r\n  onChange: (value: number) => void = () => null;\r\n  onTouched: () => void = () => null;\r\n  @Output() readonly nzBlur = new EventEmitter();\r\n  @Output() readonly nzFocus = new EventEmitter();\r\n  @ViewChild('inputElement', { static: true }) inputElement: ElementRef<HTMLInputElement>;\r\n  @Input() nzSize: NzSizeLDSType = 'default';\r\n  @Input() nzMin: number = -Infinity;\r\n  @Input() nzMax: number = Infinity;\r\n  @Input() nzParser = (value: any) => value; // tslint:disable-line:no-any\r\n  @Input() nzPrecision: number;\r\n  @Input() nzPlaceHolder = '';\r\n  @Input() nzStep = 1;\r\n  @Input() nzId: string;\r\n  @Input() @InputBoolean() nzDisabled = false;\r\n  @Input() @InputBoolean() nzAutoFocus = false;\r\n  @Input() nzFormatter: (value: number) => string | number = value => value;\r\n\r\n  [property: string]: any; // tslint:disable-line:no-any\r\n\r\n  updateAutoFocus(): void {\r\n    if (this.nzAutoFocus) {\r\n      this.renderer.setAttribute(this.inputElement.nativeElement, 'autofocus', 'autofocus');\r\n    } else {\r\n      this.renderer.removeAttribute(this.inputElement.nativeElement, 'autofocus');\r\n    }\r\n  }\r\n\r\n  onModelChange(value: string): void {\r\n    this.actualValue = this.nzParser(\r\n      value\r\n        .trim()\r\n        .replace(/ã/g, '.')\r\n        .replace(/[^\\w\\.-]+/g, '')\r\n    );\r\n    this.inputElement.nativeElement.value = `${this.actualValue}`;\r\n  }\r\n\r\n  getCurrentValidValue(value: string | number): number {\r\n    let val = value;\r\n    if (val === '') {\r\n      val = '';\r\n    } else if (!this.isNotCompleteNumber(val)) {\r\n      val = this.getValidValue(val) as string;\r\n    } else {\r\n      val = this.value;\r\n    }\r\n    return this.toNumber(val);\r\n  }\r\n\r\n  // '1.' '1x' 'xx' '' => are not complete numbers\r\n  isNotCompleteNumber(num: string | number): boolean {\r\n    return isNaN(num as number) || num === '' || num === null || !!(num && num.toString().indexOf('.') === num.toString().length - 1);\r\n  }\r\n\r\n  getValidValue(value?: string | number): string | number | undefined {\r\n    let val = parseFloat(value as string);\r\n    // https://github.com/ant-design/ant-design/issues/7358\r\n    if (isNaN(val)) {\r\n      return value;\r\n    }\r\n    if (val < this.nzMin) {\r\n      val = this.nzMin;\r\n    }\r\n    if (val > this.nzMax) {\r\n      val = this.nzMax;\r\n    }\r\n    return val;\r\n  }\r\n\r\n  toNumber(num: string | number): number {\r\n    if (this.isNotCompleteNumber(num)) {\r\n      return num as number;\r\n    }\r\n    if (isNotNil(this.nzPrecision)) {\r\n      return Number(Number(num).toFixed(this.nzPrecision));\r\n    }\r\n    return Number(num);\r\n  }\r\n\r\n  setValidateValue(): void {\r\n    const value = this.getCurrentValidValue(this.actualValue);\r\n    this.setValue(value, `${this.value}` !== `${value}`);\r\n  }\r\n\r\n  onBlur(): void {\r\n    this.isFocused = false;\r\n    this.setValidateValue();\r\n  }\r\n\r\n  onFocus(): void {\r\n    this.isFocused = true;\r\n  }\r\n\r\n  getRatio(e: KeyboardEvent): number {\r\n    let ratio = 1;\r\n    if (e.metaKey || e.ctrlKey) {\r\n      ratio = 0.1;\r\n    } else if (e.shiftKey) {\r\n      ratio = 10;\r\n    }\r\n    return ratio;\r\n  }\r\n\r\n  down(e: MouseEvent | KeyboardEvent, ratio?: number): void {\r\n    if (!this.isFocused) {\r\n      this.focus();\r\n    }\r\n    this.step('down', e, ratio);\r\n  }\r\n\r\n  up(e: MouseEvent | KeyboardEvent, ratio?: number): void {\r\n    if (!this.isFocused) {\r\n      this.focus();\r\n    }\r\n    this.step('up', e, ratio);\r\n  }\r\n\r\n  getPrecision(value: number): number {\r\n    const valueString = value.toString();\r\n    if (valueString.indexOf('e-') >= 0) {\r\n      return parseInt(valueString.slice(valueString.indexOf('e-') + 2), 10);\r\n    }\r\n    let precision = 0;\r\n    if (valueString.indexOf('.') >= 0) {\r\n      precision = valueString.length - valueString.indexOf('.') - 1;\r\n    }\r\n    return precision;\r\n  }\r\n\r\n  // step={1.0} value={1.51}\r\n  // press +\r\n  // then value should be 2.51, rather than 2.5\r\n  // if this.props.precision is undefined\r\n  // https://github.com/react-component/input-number/issues/39\r\n  getMaxPrecision(currentValue: string | number, ratio: number): number {\r\n    if (isNotNil(this.nzPrecision)) {\r\n      return this.nzPrecision;\r\n    }\r\n    const ratioPrecision = this.getPrecision(ratio);\r\n    const stepPrecision = this.getPrecision(this.nzStep);\r\n    const currentValuePrecision = this.getPrecision(currentValue as number);\r\n    if (!currentValue) {\r\n      return ratioPrecision + stepPrecision;\r\n    }\r\n    return Math.max(currentValuePrecision, ratioPrecision + stepPrecision);\r\n  }\r\n\r\n  getPrecisionFactor(currentValue: string | number, ratio: number): number {\r\n    const precision = this.getMaxPrecision(currentValue, ratio);\r\n    return Math.pow(10, precision);\r\n  }\r\n\r\n  upStep(val: string | number, rat: number): number {\r\n    const precisionFactor = this.getPrecisionFactor(val, rat);\r\n    const precision = Math.abs(this.getMaxPrecision(val, rat));\r\n    let result;\r\n    if (typeof val === 'number') {\r\n      result = ((precisionFactor * val + precisionFactor * this.nzStep * rat) / precisionFactor).toFixed(precision);\r\n    } else {\r\n      result = this.nzMin === -Infinity ? this.nzStep : this.nzMin;\r\n    }\r\n    return this.toNumber(result);\r\n  }\r\n\r\n  downStep(val: string | number, rat: number): number {\r\n    const precisionFactor = this.getPrecisionFactor(val, rat);\r\n    const precision = Math.abs(this.getMaxPrecision(val, rat));\r\n    let result;\r\n    if (typeof val === 'number') {\r\n      result = ((precisionFactor * val - precisionFactor * this.nzStep * rat) / precisionFactor).toFixed(precision);\r\n    } else {\r\n      result = this.nzMin === -Infinity ? -this.nzStep : this.nzMin;\r\n    }\r\n    return this.toNumber(result);\r\n  }\r\n\r\n  step(type: string, e: MouseEvent | KeyboardEvent, ratio: number = 1): void {\r\n    this.stop();\r\n    e.preventDefault();\r\n    if (this.nzDisabled) {\r\n      return;\r\n    }\r\n    const value = this.getCurrentValidValue(this.actualValue) || 0;\r\n    let val = 0;\r\n    if (type === 'up') {\r\n      val = this.upStep(value, ratio);\r\n    } else if (type === 'down') {\r\n      val = this.downStep(value, ratio);\r\n    }\r\n    const outOfRange = val > this.nzMax || val < this.nzMin;\r\n    if (val > this.nzMax) {\r\n      val = this.nzMax;\r\n    } else if (val < this.nzMin) {\r\n      val = this.nzMin;\r\n    }\r\n    this.setValue(val, true);\r\n    this.isFocused = true;\r\n    if (outOfRange) {\r\n      return;\r\n    }\r\n    this.autoStepTimer = setTimeout(() => {\r\n      this[type](e, ratio, true);\r\n    }, 600);\r\n  }\r\n\r\n  stop(): void {\r\n    if (this.autoStepTimer) {\r\n      clearTimeout(this.autoStepTimer);\r\n    }\r\n  }\r\n\r\n  setValue(value: number, emit: boolean): void {\r\n    if (emit && `${this.value}` !== `${value}`) {\r\n      this.onChange(value);\r\n    }\r\n    this.value = value;\r\n    this.actualValue = value;\r\n    const displayValue = isNotNil(this.nzFormatter(this.value)) ? this.nzFormatter(this.value) : '';\r\n    this.displayValue = displayValue;\r\n    this.inputElement.nativeElement.value = `${displayValue}`;\r\n    this.disabledUp = this.disabledDown = false;\r\n    if (value || value === 0) {\r\n      const val = Number(value);\r\n      if (val >= this.nzMax) {\r\n        this.disabledUp = true;\r\n      }\r\n      if (val <= this.nzMin) {\r\n        this.disabledDown = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  onKeyDown(e: KeyboardEvent): void {\r\n    if (e.code === 'ArrowUp' || e.keyCode === UP_ARROW) {\r\n      const ratio = this.getRatio(e);\r\n      this.up(e, ratio);\r\n      this.stop();\r\n    } else if (e.code === 'ArrowDown' || e.keyCode === DOWN_ARROW) {\r\n      const ratio = this.getRatio(e);\r\n      this.down(e, ratio);\r\n      this.stop();\r\n    } else if (e.keyCode === ENTER) {\r\n      this.setValidateValue();\r\n    }\r\n  }\r\n\r\n  onKeyUp(): void {\r\n    this.stop();\r\n  }\r\n\r\n  writeValue(value: number): void {\r\n    this.setValue(value, false);\r\n    this.cdr.markForCheck();\r\n  }\r\n\r\n  registerOnChange(fn: (_: number) => void): void {\r\n    this.onChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn: () => void): void {\r\n    this.onTouched = fn;\r\n  }\r\n\r\n  setDisabledState(isDisabled: boolean): void {\r\n    this.nzDisabled = isDisabled;\r\n    this.cdr.markForCheck();\r\n  }\r\n\r\n  focus(): void {\r\n    this.focusMonitor.focusVia(this.inputElement, 'keyboard');\r\n  }\r\n\r\n  blur(): void {\r\n    this.inputElement.nativeElement.blur();\r\n  }\r\n\r\n  constructor(\r\n    private elementRef: ElementRef,\r\n    private renderer: Renderer2,\r\n    private cdr: ChangeDetectorRef,\r\n    private focusMonitor: FocusMonitor\r\n  ) {\r\n    renderer.addClass(elementRef.nativeElement, 'ant-input-number');\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.focusMonitor.monitor(this.elementRef, true).subscribe(focusOrigin => {\r\n      if (!focusOrigin) {\r\n        this.onBlur();\r\n        this.nzBlur.emit();\r\n        Promise.resolve().then(() => this.onTouched());\r\n      } else {\r\n        this.onFocus();\r\n        this.nzFocus.emit();\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (changes.nzAutoFocus) {\r\n      this.updateAutoFocus();\r\n    }\r\n    if (changes.nzFormatter) {\r\n      const value = this.getCurrentValidValue(this.actualValue);\r\n      this.setValue(value, true);\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    if (this.nzAutoFocus) {\r\n      this.focus();\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.focusMonitor.stopMonitoring(this.elementRef);\r\n  }\r\n}\r\n","<div class=\"ant-input-number-handler-wrap\">\r\n  <span\r\n    unselectable=\"unselectable\"\r\n    class=\"ant-input-number-handler ant-input-number-handler-up\"\r\n    (mousedown)=\"up($event)\"\r\n    (mouseup)=\"stop()\"\r\n    (mouseleave)=\"stop()\"\r\n    [class.ant-input-number-handler-up-disabled]=\"disabledUp\"\r\n  >\r\n    <i nz-icon nzType=\"up\" class=\"ant-input-number-handler-up-inner\"></i>\r\n  </span>\r\n  <span\r\n    unselectable=\"unselectable\"\r\n    class=\"ant-input-number-handler ant-input-number-handler-down\"\r\n    (mousedown)=\"down($event)\"\r\n    (mouseup)=\"stop()\"\r\n    (mouseleave)=\"stop()\"\r\n    [class.ant-input-number-handler-down-disabled]=\"disabledDown\"\r\n  >\r\n    <i nz-icon nzType=\"down\" class=\"ant-input-number-handler-down-inner\"></i>\r\n  </span>\r\n</div>\r\n<div class=\"ant-input-number-input-wrap\">\r\n  <input\r\n    #inputElement\r\n    autocomplete=\"off\"\r\n    class=\"ant-input-number-input\"\r\n    [attr.id]=\"nzId\"\r\n    [disabled]=\"nzDisabled\"\r\n    [attr.min]=\"nzMin\"\r\n    [attr.max]=\"nzMax\"\r\n    [placeholder]=\"nzPlaceHolder\"\r\n    [attr.step]=\"nzStep\"\r\n    (keydown)=\"onKeyDown($event)\"\r\n    (keyup)=\"onKeyUp()\"\r\n    [ngModel]=\"displayValue\"\r\n    (ngModelChange)=\"onModelChange($event)\"\r\n  />\r\n</div>\r\n","/**\r\n * @license\r\n * Copyright Alibaba.com All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\r\n */\r\n\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { NzIconModule } from 'ng-zorro-antd/icon';\r\n\r\nimport { NzInputNumberComponent } from './nz-input-number.component';\r\n\r\n@NgModule({\r\n  imports: [CommonModule, FormsModule, NzIconModule],\r\n  declarations: [NzInputNumberComponent],\r\n  exports: [NzInputNumberComponent]\r\n})\r\nexport class NzInputNumberModule {}\r\n","/**\r\n * @license\r\n * Copyright Alibaba.com All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\r\n */\r\n\r\nexport * from './nz-input-number.component';\r\nexport * from './nz-input-number.module';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i0.ɵɵelementStart","i0.ɵɵlistener","i0.ɵɵelement","i0.ɵɵelementEnd","i0.ɵɵadvance","i0.ɵɵclassProp","i0.ɵɵproperty","i0.ɵɵattribute"],"mappings":"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"}