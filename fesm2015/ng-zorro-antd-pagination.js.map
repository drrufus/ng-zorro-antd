{"version":3,"file":"ng-zorro-antd-pagination.js","sources":["ng://ng-zorro-antd/pagination/nz-pagination.component.ts","ng://ng-zorro-antd/pagination/nz-pagination.module.ts"],"sourcesContent":["/**\r\n * @license\r\n * Copyright Alibaba.com All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\r\n */\r\n\r\nimport {\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  EventEmitter,\r\n  Input,\r\n  OnChanges,\r\n  OnDestroy,\r\n  OnInit,\r\n  Output,\r\n  SimpleChanges,\r\n  TemplateRef,\r\n  ViewChild,\r\n  ViewEncapsulation\r\n} from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\n\r\nimport { isInteger, toNumber, InputBoolean, InputNumber } from 'ng-zorro-antd/core';\r\nimport { NzI18nService } from 'ng-zorro-antd/i18n';\r\n\r\nexport interface PaginationItemRenderContext {\r\n  $implicit: 'page' | 'prev' | 'next';\r\n  page: number;\r\n}\r\n\r\n@Component({\r\n  selector: 'nz-pagination',\r\n  exportAs: 'nzPagination',\r\n  preserveWhitespaces: false,\r\n  encapsulation: ViewEncapsulation.None,\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  templateUrl: './nz-pagination.component.html'\r\n})\r\nexport class NzPaginationComponent implements OnInit, OnDestroy, OnChanges {\r\n  // tslint:disable-next-line:no-any\r\n  locale: any = {};\r\n  firstIndex = 1;\r\n  pages: number[] = [];\r\n  private $destroy = new Subject<void>();\r\n  @Output() readonly nzPageSizeChange: EventEmitter<number> = new EventEmitter();\r\n  @Output() readonly nzPageIndexChange: EventEmitter<number> = new EventEmitter();\r\n  @Input() nzShowTotal: TemplateRef<{ $implicit: number; range: [number, number] }>;\r\n  @Input() nzInTable = false;\r\n  @Input() nzSize: 'default' | 'small' = 'default';\r\n  @Input() nzPageSizeOptions = [10, 20, 30, 40];\r\n\r\n  @Input() nzItemRender: TemplateRef<PaginationItemRenderContext>;\r\n  @ViewChild('renderItemTemplate', { static: true }) nzItemRenderChild: TemplateRef<PaginationItemRenderContext>;\r\n  get itemRender(): TemplateRef<PaginationItemRenderContext> {\r\n    return this.nzItemRender || this.nzItemRenderChild;\r\n  }\r\n\r\n  @Input() @InputBoolean() nzDisabled = false;\r\n  @Input() @InputBoolean() nzShowSizeChanger = false;\r\n  @Input() @InputBoolean() nzHideOnSinglePage = false;\r\n  @Input() @InputBoolean() nzShowQuickJumper = false;\r\n  @Input() @InputBoolean() nzSimple = false;\r\n  @Input() @InputNumber() nzTotal = 0;\r\n  @Input() @InputNumber() nzPageIndex = 1;\r\n  @Input() @InputNumber() nzPageSize = 10;\r\n\r\n  validatePageIndex(value: number): number {\r\n    if (value > this.lastIndex) {\r\n      return this.lastIndex;\r\n    } else if (value < this.firstIndex) {\r\n      return this.firstIndex;\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n\r\n  updatePageIndexValue(page: number): void {\r\n    this.nzPageIndex = page;\r\n    this.nzPageIndexChange.emit(this.nzPageIndex);\r\n    this.buildIndexes();\r\n  }\r\n\r\n  isPageIndexValid(value: number): boolean {\r\n    return this.validatePageIndex(value) === value;\r\n  }\r\n\r\n  jumpPage(index: number): void {\r\n    if (index !== this.nzPageIndex && !this.nzDisabled) {\r\n      const pageIndex = this.validatePageIndex(index);\r\n      if (pageIndex !== this.nzPageIndex) {\r\n        this.updatePageIndexValue(pageIndex);\r\n      }\r\n    }\r\n  }\r\n\r\n  jumpDiff(diff: number): void {\r\n    this.jumpPage(this.nzPageIndex + diff);\r\n  }\r\n\r\n  onPageSizeChange($event: number): void {\r\n    this.nzPageSize = $event;\r\n    this.nzPageSizeChange.emit($event);\r\n    this.buildIndexes();\r\n    if (this.nzPageIndex > this.lastIndex) {\r\n      this.updatePageIndexValue(this.lastIndex);\r\n    }\r\n  }\r\n\r\n  handleKeyDown(_: KeyboardEvent, input: HTMLInputElement, clearInputValue: boolean): void {\r\n    const target = input;\r\n    const page = toNumber(target.value, this.nzPageIndex);\r\n    if (isInteger(page) && this.isPageIndexValid(page) && page !== this.nzPageIndex) {\r\n      this.updatePageIndexValue(page);\r\n    }\r\n    if (clearInputValue) {\r\n      target.value = '';\r\n    } else {\r\n      target.value = `${this.nzPageIndex}`;\r\n    }\r\n  }\r\n\r\n  /** generate indexes list */\r\n  buildIndexes(): void {\r\n    const pages: number[] = [];\r\n    if (this.lastIndex <= 9) {\r\n      for (let i = 2; i <= this.lastIndex - 1; i++) {\r\n        pages.push(i);\r\n      }\r\n    } else {\r\n      const current = +this.nzPageIndex;\r\n      let left = Math.max(2, current - 2);\r\n      let right = Math.min(current + 2, this.lastIndex - 1);\r\n      if (current - 1 <= 2) {\r\n        right = 5;\r\n      }\r\n      if (this.lastIndex - current <= 2) {\r\n        left = this.lastIndex - 4;\r\n      }\r\n      for (let i = left; i <= right; i++) {\r\n        pages.push(i);\r\n      }\r\n    }\r\n    this.pages = pages;\r\n    this.cdr.markForCheck();\r\n  }\r\n\r\n  get lastIndex(): number {\r\n    return Math.ceil(this.nzTotal / this.nzPageSize);\r\n  }\r\n\r\n  get isLastIndex(): boolean {\r\n    return this.nzPageIndex === this.lastIndex;\r\n  }\r\n\r\n  get isFirstIndex(): boolean {\r\n    return this.nzPageIndex === this.firstIndex;\r\n  }\r\n\r\n  get ranges(): number[] {\r\n    return [(this.nzPageIndex - 1) * this.nzPageSize + 1, Math.min(this.nzPageIndex * this.nzPageSize, this.nzTotal)];\r\n  }\r\n\r\n  get showAddOption(): boolean {\r\n    return this.nzPageSizeOptions.indexOf(this.nzPageSize) === -1;\r\n  }\r\n\r\n  constructor(private i18n: NzI18nService, private cdr: ChangeDetectorRef) {}\r\n\r\n  ngOnInit(): void {\r\n    this.i18n.localeChange.pipe(takeUntil(this.$destroy)).subscribe(() => {\r\n      this.locale = this.i18n.getLocaleData('Pagination');\r\n      this.cdr.markForCheck();\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.$destroy.next();\r\n    this.$destroy.complete();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (changes.nzTotal || changes.nzPageSize || changes.nzPageIndex) {\r\n      this.buildIndexes();\r\n    }\r\n  }\r\n}\r\n","/**\r\n * @license\r\n * Copyright Alibaba.com All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\r\n */\r\n\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { NzI18nModule } from 'ng-zorro-antd/i18n';\r\nimport { NzIconModule } from 'ng-zorro-antd/icon';\r\nimport { NzSelectModule } from 'ng-zorro-antd/select';\r\n\r\nimport { NzPaginationComponent } from './nz-pagination.component';\r\n\r\n@NgModule({\r\n  declarations: [NzPaginationComponent],\r\n  exports: [NzPaginationComponent],\r\n  imports: [CommonModule, FormsModule, NzSelectModule, NzI18nModule, NzIconModule]\r\n})\r\nexport class NzPaginationModule {}\r\n"],"names":["tslib_1.__decorate"],"mappings":"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"}