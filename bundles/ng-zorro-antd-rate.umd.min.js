!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/cdk/keycodes"),require("@angular/core"),require("@angular/forms"),require("rxjs"),require("rxjs/operators"),require("ng-zorro-antd/core"),require("@angular/common"),require("ng-zorro-antd/tooltip"),require("ng-zorro-antd/icon")):"function"==typeof define&&define.amd?define("ng-zorro-antd/rate",["exports","@angular/cdk/keycodes","@angular/core","@angular/forms","rxjs","rxjs/operators","ng-zorro-antd/core","@angular/common","ng-zorro-antd/tooltip","ng-zorro-antd/icon"],t):t(((e=e||self)["ng-zorro-antd"]=e["ng-zorro-antd"]||{},e["ng-zorro-antd"].rate={}),e.ng.cdk.keycodes,e.ng.core,e.ng.forms,e.rxjs,e.rxjs.operators,e["ng-zorro-antd"].core,e.ng.common,e["ng-zorro-antd"].tooltip,e["ng-zorro-antd"].icon)}(this,(function(e,t,n,o,r,i,a,s,l,u){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function c(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function h(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}var f=["nz-rate-item",""];function p(e,t){}function d(e,t){}function m(e,t){1&e&&n.ɵɵelement(0,"i",4)}var z=function(){function e(){this.allowHalf=!1,this.itemHover=new n.EventEmitter,this.itemClick=new n.EventEmitter}return e.prototype.hoverRate=function(e){this.itemHover.next(e&&this.allowHalf)},e.prototype.clickRate=function(e){this.itemClick.next(e&&this.allowHalf)},e.ɵfac=function(t){return new(t||e)},e.ɵcmp=n.ɵɵdefineComponent({type:e,selectors:[["","nz-rate-item",""]],inputs:{character:"character",allowHalf:"allowHalf"},outputs:{itemHover:"itemHover",itemClick:"itemClick"},exportAs:["nzRateItem"],attrs:f,decls:6,vars:2,consts:[[1,"ant-rate-star-second",3,"mouseover","click"],[3,"ngTemplateOutlet"],[1,"ant-rate-star-first",3,"mouseover","click"],["defaultCharacter",""],["nz-icon","","nzType","star","nzTheme","fill"]],template:function(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",0),n.ɵɵlistener("mouseover",(function(e){return t.hoverRate(!1),e.stopPropagation()}))("click",(function(e){return t.clickRate(!1)})),n.ɵɵtemplate(1,p,0,0,"ng-template",1),n.ɵɵelementEnd(),n.ɵɵelementStart(2,"div",2),n.ɵɵlistener("mouseover",(function(e){return t.hoverRate(!0),e.stopPropagation()}))("click",(function(e){return t.clickRate(!0)})),n.ɵɵtemplate(3,d,0,0,"ng-template",1),n.ɵɵelementEnd(),n.ɵɵtemplate(4,m,1,0,"ng-template",null,3,n.ɵɵtemplateRefExtractor)),2&e){var o=n.ɵɵreference(5);n.ɵɵadvance(1),n.ɵɵproperty("ngTemplateOutlet",t.character||o),n.ɵɵadvance(2),n.ɵɵproperty("ngTemplateOutlet",t.character||o)}},directives:[s.NgTemplateOutlet,u.NzIconDirective],encapsulation:2,changeDetection:0}),c([a.InputBoolean(),h("design:type",Boolean)],e.prototype,"allowHalf",void 0),e}(),v=["ulElement"];function g(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"li",3),n.ɵɵelementStart(1,"div",4),n.ɵɵlistener("itemHover",(function(e){n.ɵɵrestoreView(o);var r=t.index;return n.ɵɵnextContext().onItemHover(r,e)}))("itemClick",(function(e){n.ɵɵrestoreView(o);var r=t.index;return n.ɵɵnextContext().onItemClick(r,e)})),n.ɵɵelementEnd(),n.ɵɵelementEnd()}if(2&e){var r=t.$implicit,i=t.index,a=n.ɵɵnextContext();n.ɵɵproperty("ngClass",a.setClasses(r))("nzTitle",a.nzTooltips[i]),n.ɵɵadvance(1),n.ɵɵproperty("allowHalf",a.nzAllowHalf)("character",a.nzCharacter)}}var y=function(){function e(e,t,o){this.nzConfigService=e,this.renderer=t,this.cdr=o,this.nzDisabled=!1,this.nzAutoFocus=!1,this.nzTooltips=[],this.nzOnBlur=new n.EventEmitter,this.nzOnFocus=new n.EventEmitter,this.nzOnHoverChange=new n.EventEmitter,this.nzOnKeyDown=new n.EventEmitter,this.hasHalf=!1,this.hoverValue=0,this.prefixCls="ant-rate",this.innerPrefixCls=this.prefixCls+"-star",this.isFocused=!1,this.isInit=!1,this.starArray=[],this.destroy$=new r.Subject,this._count=5,this._value=0,this.onChange=function(){return null},this.onTouched=function(){return null}}return Object.defineProperty(e.prototype,"nzCount",{get:function(){return this._count},set:function(e){this._count!==e&&(this._count=e,this.updateStarArray())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nzValue",{get:function(){return this._value},set:function(e){this._value!==e&&(this._value=e,this.hasHalf=!Number.isInteger(e),this.hoverValue=Math.ceil(e))},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(e){e.nzAutoFocus&&!e.nzAutoFocus.isFirstChange()&&(this.nzAutoFocus&&!this.nzDisabled?this.renderer.setAttribute(this.ulElement.nativeElement,"autofocus","autofocus"):this.renderer.removeAttribute(this.ulElement.nativeElement,"autofocus"))},e.prototype.ngOnInit=function(){var e=this;this.updateStarArray(),this.nzConfigService.getConfigChangeEventForComponent("rate").pipe(i.takeUntil(this.destroy$)).subscribe((function(){return e.cdr.markForCheck()}))},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.prototype.ngAfterViewInit=function(){this.isInit=!0},e.prototype.onItemClick=function(e,t){if(!this.nzDisabled){this.hoverValue=e+1;var n=t?e+.5:e+1;this.nzValue===n?this.nzAllowClear&&(this.nzValue=0,this.onChange(this.nzValue)):(this.nzValue=n,this.onChange(this.nzValue))}},e.prototype.onItemHover=function(e,t){this.nzDisabled||this.hoverValue===e+1&&t===this.hasHalf||(this.hoverValue=e+1,this.hasHalf=t,this.nzOnHoverChange.emit(this.hoverValue))},e.prototype.onRateLeave=function(){this.hasHalf=!Number.isInteger(this.nzValue),this.hoverValue=Math.ceil(this.nzValue)},e.prototype.onFocus=function(e){this.isFocused=!0,this.nzOnFocus.emit(e)},e.prototype.onBlur=function(e){this.isFocused=!1,this.nzOnBlur.emit(e)},e.prototype.focus=function(){this.ulElement.nativeElement.focus()},e.prototype.blur=function(){this.ulElement.nativeElement.blur()},e.prototype.onKeyDown=function(e){var n=this.nzValue;e.keyCode===t.RIGHT_ARROW&&this.nzValue<this.nzCount?this.nzValue+=this.nzAllowHalf?.5:1:e.keyCode===t.LEFT_ARROW&&this.nzValue>0&&(this.nzValue-=this.nzAllowHalf?.5:1),n!==this.nzValue&&(this.onChange(this.nzValue),this.nzOnKeyDown.emit(e),this.cdr.markForCheck())},e.prototype.setClasses=function(e){var t;return(t={})[this.innerPrefixCls+"-full"]=e+1<this.hoverValue||!this.hasHalf&&e+1===this.hoverValue,t[this.innerPrefixCls+"-half"]=this.hasHalf&&e+1===this.hoverValue,t[this.innerPrefixCls+"-active"]=this.hasHalf&&e+1===this.hoverValue,t[this.innerPrefixCls+"-zero"]=e+1>this.hoverValue,t[this.innerPrefixCls+"-focused"]=this.hasHalf&&e+1===this.hoverValue&&this.isFocused,t},e.prototype.updateStarArray=function(){this.starArray=Array(this.nzCount).fill(0).map((function(e,t){return t}))},e.prototype.writeValue=function(e){this.nzValue=e||0,this.cdr.markForCheck()},e.prototype.setDisabledState=function(e){this.nzDisabled=e},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.ɵfac=function(t){return new(t||e)(n.ɵɵdirectiveInject(a.NzConfigService),n.ɵɵdirectiveInject(n.Renderer2),n.ɵɵdirectiveInject(n.ChangeDetectorRef))},e.ɵcmp=n.ɵɵdefineComponent({type:e,selectors:[["nz-rate"]],viewQuery:function(e,t){var o;(1&e&&n.ɵɵviewQuery(v,!0),2&e)&&(n.ɵɵqueryRefresh(o=n.ɵɵloadQuery())&&(t.ulElement=o.first))},inputs:{nzAllowClear:"nzAllowClear",nzAllowHalf:"nzAllowHalf",nzDisabled:"nzDisabled",nzAutoFocus:"nzAutoFocus",nzCharacter:"nzCharacter",nzTooltips:"nzTooltips",nzCount:"nzCount"},outputs:{nzOnBlur:"nzOnBlur",nzOnFocus:"nzOnFocus",nzOnHoverChange:"nzOnHoverChange",nzOnKeyDown:"nzOnKeyDown"},exportAs:["nzRate"],features:[n.ɵɵProvidersFeature([{provide:o.NG_VALUE_ACCESSOR,useExisting:n.forwardRef((function(){return e})),multi:!0}]),n.ɵɵNgOnChangesFeature()],decls:3,vars:4,consts:[[1,"ant-rate",3,"ngClass","tabindex","blur","focus","keydown","mouseleave"],["ulElement",""],["class","ant-rate-star","nz-tooltip","",3,"ngClass","nzTitle",4,"ngFor","ngForOf"],["nz-tooltip","",1,"ant-rate-star",3,"ngClass","nzTitle"],["nz-rate-item","",3,"allowHalf","character","itemHover","itemClick"]],template:function(e,t){1&e&&(n.ɵɵelementStart(0,"ul",0,1),n.ɵɵlistener("blur",(function(e){return t.onBlur(e)}))("focus",(function(e){return t.onFocus(e)}))("keydown",(function(e){return t.onKeyDown(e),e.preventDefault()}))("mouseleave",(function(e){return t.onRateLeave(),e.stopPropagation()})),n.ɵɵtemplate(2,g,2,4,"li",2),n.ɵɵelementEnd()),2&e&&(n.ɵɵclassProp("ant-rate-disabled",t.nzDisabled),n.ɵɵproperty("ngClass",t.classMap)("tabindex",t.nzDisabled?-1:1),n.ɵɵadvance(2),n.ɵɵproperty("ngForOf",t.starArray))},directives:[s.NgClass,s.NgForOf,l.NzTooltipDirective,z],encapsulation:2,changeDetection:0}),c([a.WithConfig("rate",!0),a.InputBoolean(),h("design:type",Boolean)],e.prototype,"nzAllowClear",void 0),c([a.WithConfig("rate",!1),a.InputBoolean(),h("design:type",Boolean)],e.prototype,"nzAllowHalf",void 0),c([a.InputBoolean(),h("design:type",Boolean)],e.prototype,"nzDisabled",void 0),c([a.InputBoolean(),h("design:type",Boolean)],e.prototype,"nzAutoFocus",void 0),e}(),C=function(){function e(){}return e.ɵmod=n.ɵɵdefineNgModule({type:e}),e.ɵinj=n.ɵɵdefineInjector({factory:function(t){return new(t||e)},imports:[[s.CommonModule,u.NzIconModule,l.NzToolTipModule]]}),e}();("undefined"==typeof ngJitMode||ngJitMode)&&n.ɵɵsetNgModuleScope(C,{declarations:[y,z],imports:[s.CommonModule,u.NzIconModule,l.NzToolTipModule],exports:[y]}),e.NzRateComponent=y,e.NzRateItemComponent=z,e.NzRateModule=C,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-zorro-antd-rate.umd.min.js.map