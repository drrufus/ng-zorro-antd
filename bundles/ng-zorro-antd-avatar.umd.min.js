!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/cdk/platform"),require("@angular/core"),require("ng-zorro-antd/core"),require("@angular/common"),require("ng-zorro-antd/icon")):"function"==typeof define&&define.amd?define("ng-zorro-antd/avatar",["exports","@angular/cdk/platform","@angular/core","ng-zorro-antd/core","@angular/common","ng-zorro-antd/icon"],t):t(((e=e||self)["ng-zorro-antd"]=e["ng-zorro-antd"]||{},e["ng-zorro-antd"].avatar={}),e.ng.cdk.platform,e.ng.core,e["ng-zorro-antd"].core,e.ng.common,e["ng-zorro-antd"].icon)}(this,(function(e,t,n,r,i,o){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function s(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function a(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}var c=["textEl"];function l(e,t){if(1&e&&n.ɵɵelement(0,"i",3),2&e){var r=n.ɵɵnextContext();n.ɵɵproperty("nzType",!r.oldAPIIcon&&r.nzIcon)("ngClass",r.oldAPIIcon&&r.nzIcon)}}function h(e,t){if(1&e){var r=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"img",4),n.ɵɵlistener("error",(function(e){return n.ɵɵrestoreView(r),n.ɵɵnextContext().imgError(e)})),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext();n.ɵɵproperty("src",i.nzSrc,n.ɵɵsanitizeUrl),n.ɵɵattribute("srcset",i.nzSrcSet,n.ɵɵsanitizeUrl)("alt",i.nzAlt)}}function f(e,t){if(1&e&&(n.ɵɵelementStart(0,"span",5,6),n.ɵɵtext(2),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext();n.ɵɵproperty("ngStyle",r.textStyles),n.ɵɵadvance(2),n.ɵɵtextInterpolate(r.nzText)}}var p=function(){function e(e,t,r,i,o,s){this.nzConfigService=e,this.elementRef=t,this.cd=r,this.updateHostClassService=i,this.renderer=o,this.platform=s,this.nzError=new n.EventEmitter,this.oldAPIIcon=!0,this.hasText=!1,this.hasSrc=!0,this.hasIcon=!1,this.el=this.elementRef.nativeElement,this.prefixCls="ant-avatar",this.sizeMap={large:"lg",small:"sm"}}return e.prototype.setClass=function(){var e,t=((e={})[this.prefixCls]=!0,e[this.prefixCls+"-"+this.sizeMap[this.nzSize]]=this.sizeMap[this.nzSize],e[this.prefixCls+"-"+this.nzShape]=this.nzShape,e[this.prefixCls+"-icon"]=this.nzIcon,e[this.prefixCls+"-image"]=this.hasSrc,e);return this.updateHostClassService.updateHostClass(this.el,t),this.cd.detectChanges(),this},e.prototype.imgError=function(e){this.nzError.emit(e),e.defaultPrevented||(this.hasSrc=!1,this.hasIcon=!1,this.hasText=!1,this.nzIcon?this.hasIcon=!0:this.nzText&&(this.hasText=!0),this.setClass().notifyCalc(),this.setSizeStyle())},e.prototype.ngOnChanges=function(e){e.hasOwnProperty("nzIcon")&&e.nzIcon.currentValue&&(this.oldAPIIcon=e.nzIcon.currentValue.indexOf("anticon")>-1),this.hasText=!this.nzSrc&&!!this.nzText,this.hasIcon=!this.nzSrc&&!!this.nzIcon,this.hasSrc=!!this.nzSrc,this.setClass().notifyCalc(),this.setSizeStyle()},e.prototype.calcStringSize=function(){if(this.hasText){var e=this.textEl.nativeElement.offsetWidth,t=this.el.getBoundingClientRect().width,n=t-8<e?(t-8)/e:1;this.textStyles={transform:"scale("+n+") translateX(-50%)"},"number"==typeof this.nzSize&&Object.assign(this.textStyles,{lineHeight:this.nzSize+"px"}),this.cd.detectChanges()}},e.prototype.notifyCalc=function(){var e=this;return this.platform.isBrowser&&setTimeout((function(){e.calcStringSize()})),this},e.prototype.setSizeStyle=function(){var e="string"==typeof this.nzSize?this.nzSize:this.nzSize+"px";this.renderer.setStyle(this.el,"width",e),this.renderer.setStyle(this.el,"height",e),this.renderer.setStyle(this.el,"line-height",e),this.hasIcon&&this.renderer.setStyle(this.el,"font-size","calc("+e+" / 2)")},e.ɵfac=function(i){return new(i||e)(n.ɵɵdirectiveInject(r.NzConfigService),n.ɵɵdirectiveInject(n.ElementRef),n.ɵɵdirectiveInject(n.ChangeDetectorRef),n.ɵɵdirectiveInject(r.NzUpdateHostClassService),n.ɵɵdirectiveInject(n.Renderer2),n.ɵɵdirectiveInject(t.Platform))},e.ɵcmp=n.ɵɵdefineComponent({type:e,selectors:[["nz-avatar"]],viewQuery:function(e,t){var r;(1&e&&n.ɵɵviewQuery(c,!0),2&e)&&(n.ɵɵqueryRefresh(r=n.ɵɵloadQuery())&&(t.textEl=r.first))},inputs:{nzShape:"nzShape",nzSize:"nzSize",nzText:"nzText",nzSrc:"nzSrc",nzSrcSet:"nzSrcSet",nzAlt:"nzAlt",nzIcon:"nzIcon"},outputs:{nzError:"nzError"},exportAs:["nzAvatar"],features:[n.ɵɵProvidersFeature([r.NzUpdateHostClassService]),n.ɵɵNgOnChangesFeature()],decls:3,vars:3,consts:[["nz-icon","",3,"nzType","ngClass",4,"ngIf"],[3,"src","error",4,"ngIf"],["class","ant-avatar-string",3,"ngStyle",4,"ngIf"],["nz-icon","",3,"nzType","ngClass"],[3,"src","error"],[1,"ant-avatar-string",3,"ngStyle"],["textEl",""]],template:function(e,t){1&e&&(n.ɵɵtemplate(0,l,1,2,"i",0),n.ɵɵtemplate(1,h,1,3,"img",1),n.ɵɵtemplate(2,f,3,2,"span",2)),2&e&&(n.ɵɵproperty("ngIf",t.nzIcon&&t.hasIcon),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.nzSrc&&t.hasSrc),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.nzText&&t.hasText))},directives:[i.NgIf,o.NzIconDirective,i.NgClass,i.NgStyle],encapsulation:2,changeDetection:0}),s([r.WithConfig("avatar","circle"),a("design:type",String)],e.prototype,"nzShape",void 0),s([r.WithConfig("avatar","default"),a("design:type",Object)],e.prototype,"nzSize",void 0),e}(),z=function(){function e(){}return e.ɵmod=n.ɵɵdefineNgModule({type:e}),e.ɵinj=n.ɵɵdefineInjector({factory:function(t){return new(t||e)},imports:[[i.CommonModule,o.NzIconModule,t.PlatformModule]]}),e}();("undefined"==typeof ngJitMode||ngJitMode)&&n.ɵɵsetNgModuleScope(z,{declarations:[p],imports:[i.CommonModule,o.NzIconModule,t.PlatformModule],exports:[p]}),e.NzAvatarComponent=p,e.NzAvatarModule=z,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-zorro-antd-avatar.umd.min.js.map