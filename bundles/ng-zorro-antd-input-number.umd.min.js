!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/cdk/a11y"),require("@angular/cdk/keycodes"),require("@angular/core"),require("@angular/forms"),require("ng-zorro-antd/core"),require("ng-zorro-antd/icon"),require("@angular/common")):"function"==typeof define&&define.amd?define("ng-zorro-antd/input-number",["exports","@angular/cdk/a11y","@angular/cdk/keycodes","@angular/core","@angular/forms","ng-zorro-antd/core","ng-zorro-antd/icon","@angular/common"],t):t(((e=e||self)["ng-zorro-antd"]=e["ng-zorro-antd"]||{},e["ng-zorro-antd"]["input-number"]={}),e.ng.cdk.a11y,e.ng.cdk.keycodes,e.ng.core,e.ng.forms,e["ng-zorro-antd"].core,e["ng-zorro-antd"].icon,e.ng.common)}(this,(function(e,t,n,o,i,r,u,s){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function a(e,t,n,o){var i,r=arguments.length,u=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(u=(r<3?i(u):r>3?i(t,n,u):i(t,n))||u);return r>3&&u&&Object.defineProperty(t,n,u),u}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}var c=["inputElement"],p=function(){function e(e,t,n,i){this.elementRef=e,this.renderer=t,this.cdr=n,this.focusMonitor=i,this.isFocused=!1,this.disabledUp=!1,this.disabledDown=!1,this.onChange=function(){return null},this.onTouched=function(){return null},this.nzBlur=new o.EventEmitter,this.nzFocus=new o.EventEmitter,this.nzSize="default",this.nzMin=-1/0,this.nzMax=1/0,this.nzParser=function(e){return e},this.nzPlaceHolder="",this.nzStep=1,this.nzDisabled=!1,this.nzAutoFocus=!1,this.nzFormatter=function(e){return e},t.addClass(e.nativeElement,"ant-input-number")}return e.prototype.updateAutoFocus=function(){this.nzAutoFocus?this.renderer.setAttribute(this.inputElement.nativeElement,"autofocus","autofocus"):this.renderer.removeAttribute(this.inputElement.nativeElement,"autofocus")},e.prototype.onModelChange=function(e){this.actualValue=this.nzParser(e.trim().replace(/。/g,".").replace(/[^\w\.-]+/g,"")),this.inputElement.nativeElement.value=""+this.actualValue},e.prototype.getCurrentValidValue=function(e){var t=e;return t=""===t?"":this.isNotCompleteNumber(t)?this.value:this.getValidValue(t),this.toNumber(t)},e.prototype.isNotCompleteNumber=function(e){return isNaN(e)||""===e||null===e||!(!e||e.toString().indexOf(".")!==e.toString().length-1)},e.prototype.getValidValue=function(e){var t=parseFloat(e);return isNaN(t)?e:(t<this.nzMin&&(t=this.nzMin),t>this.nzMax&&(t=this.nzMax),t)},e.prototype.toNumber=function(e){return this.isNotCompleteNumber(e)?e:r.isNotNil(this.nzPrecision)?Number(Number(e).toFixed(this.nzPrecision)):Number(e)},e.prototype.setValidateValue=function(){var e=this.getCurrentValidValue(this.actualValue);this.setValue(e,""+this.value!=""+e)},e.prototype.onBlur=function(){this.isFocused=!1,this.setValidateValue()},e.prototype.onFocus=function(){this.isFocused=!0},e.prototype.getRatio=function(e){var t=1;return e.metaKey||e.ctrlKey?t=.1:e.shiftKey&&(t=10),t},e.prototype.down=function(e,t){this.isFocused||this.focus(),this.step("down",e,t)},e.prototype.up=function(e,t){this.isFocused||this.focus(),this.step("up",e,t)},e.prototype.getPrecision=function(e){var t=e.toString();if(t.indexOf("e-")>=0)return parseInt(t.slice(t.indexOf("e-")+2),10);var n=0;return t.indexOf(".")>=0&&(n=t.length-t.indexOf(".")-1),n},e.prototype.getMaxPrecision=function(e,t){if(r.isNotNil(this.nzPrecision))return this.nzPrecision;var n=this.getPrecision(t),o=this.getPrecision(this.nzStep),i=this.getPrecision(e);return e?Math.max(i,n+o):n+o},e.prototype.getPrecisionFactor=function(e,t){var n=this.getMaxPrecision(e,t);return Math.pow(10,n)},e.prototype.upStep=function(e,t){var n,o=this.getPrecisionFactor(e,t),i=Math.abs(this.getMaxPrecision(e,t));return n="number"==typeof e?((o*e+o*this.nzStep*t)/o).toFixed(i):this.nzMin===-1/0?this.nzStep:this.nzMin,this.toNumber(n)},e.prototype.downStep=function(e,t){var n,o=this.getPrecisionFactor(e,t),i=Math.abs(this.getMaxPrecision(e,t));return n="number"==typeof e?((o*e-o*this.nzStep*t)/o).toFixed(i):this.nzMin===-1/0?-this.nzStep:this.nzMin,this.toNumber(n)},e.prototype.step=function(e,t,n){var o=this;if(void 0===n&&(n=1),this.stop(),t.preventDefault(),!this.nzDisabled){var i=this.getCurrentValidValue(this.actualValue)||0,r=0;"up"===e?r=this.upStep(i,n):"down"===e&&(r=this.downStep(i,n));var u=r>this.nzMax||r<this.nzMin;r>this.nzMax?r=this.nzMax:r<this.nzMin&&(r=this.nzMin),this.setValue(r,!0),this.isFocused=!0,u||(this.autoStepTimer=setTimeout((function(){o[e](t,n,!0)}),600))}},e.prototype.stop=function(){this.autoStepTimer&&clearTimeout(this.autoStepTimer)},e.prototype.setValue=function(e,t){t&&""+this.value!=""+e&&this.onChange(e),this.value=e,this.actualValue=e;var n=r.isNotNil(this.nzFormatter(this.value))?this.nzFormatter(this.value):"";if(this.displayValue=n,this.inputElement.nativeElement.value=""+n,this.disabledUp=this.disabledDown=!1,e||0===e){var o=Number(e);o>=this.nzMax&&(this.disabledUp=!0),o<=this.nzMin&&(this.disabledDown=!0)}},e.prototype.onKeyDown=function(e){if("ArrowUp"===e.code||e.keyCode===n.UP_ARROW){var t=this.getRatio(e);this.up(e,t),this.stop()}else if("ArrowDown"===e.code||e.keyCode===n.DOWN_ARROW){t=this.getRatio(e);this.down(e,t),this.stop()}else e.keyCode===n.ENTER&&this.setValidateValue()},e.prototype.onKeyUp=function(){this.stop()},e.prototype.writeValue=function(e){this.setValue(e,!1),this.cdr.markForCheck()},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this.nzDisabled=e,this.cdr.markForCheck()},e.prototype.focus=function(){this.focusMonitor.focusVia(this.inputElement,"keyboard")},e.prototype.blur=function(){this.inputElement.nativeElement.blur()},e.prototype.ngOnInit=function(){var e=this;this.focusMonitor.monitor(this.elementRef,!0).subscribe((function(t){t?(e.onFocus(),e.nzFocus.emit()):(e.onBlur(),e.nzBlur.emit(),Promise.resolve().then((function(){return e.onTouched()})))}))},e.prototype.ngOnChanges=function(e){if(e.nzAutoFocus&&this.updateAutoFocus(),e.nzFormatter){var t=this.getCurrentValidValue(this.actualValue);this.setValue(t,!0)}},e.prototype.ngAfterViewInit=function(){this.nzAutoFocus&&this.focus()},e.prototype.ngOnDestroy=function(){this.focusMonitor.stopMonitoring(this.elementRef)},e.ɵfac=function(n){return new(n||e)(o.ɵɵdirectiveInject(o.ElementRef),o.ɵɵdirectiveInject(o.Renderer2),o.ɵɵdirectiveInject(o.ChangeDetectorRef),o.ɵɵdirectiveInject(t.FocusMonitor))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["nz-input-number"]],viewQuery:function(e,t){var n;(1&e&&o.ɵɵstaticViewQuery(c,!0),2&e)&&(o.ɵɵqueryRefresh(n=o.ɵɵloadQuery())&&(t.inputElement=n.first))},hostBindings:function(e,t,n){1&e&&o.ɵɵallocHostVars(4),2&e&&o.ɵɵclassProp("ant-input-number-focused",t.isFocused)("ant-input-number-lg","large"===t.nzSize)("ant-input-number-sm","small"===t.nzSize)("ant-input-number-disabled",t.nzDisabled)},inputs:{nzSize:"nzSize",nzMin:"nzMin",nzMax:"nzMax",nzParser:"nzParser",nzPrecision:"nzPrecision",nzPlaceHolder:"nzPlaceHolder",nzStep:"nzStep",nzId:"nzId",nzDisabled:"nzDisabled",nzAutoFocus:"nzAutoFocus",nzFormatter:"nzFormatter"},outputs:{nzBlur:"nzBlur",nzFocus:"nzFocus"},exportAs:["nzInputNumber"],features:[o.ɵɵProvidersFeature([{provide:i.NG_VALUE_ACCESSOR,useExisting:o.forwardRef((function(){return e})),multi:!0}]),o.ɵɵNgOnChangesFeature()],decls:8,vars:9,consts:[[1,"ant-input-number-handler-wrap"],["unselectable","unselectable",1,"ant-input-number-handler","ant-input-number-handler-up",3,"mousedown","mouseup","mouseleave"],["nz-icon","","nzType","up",1,"ant-input-number-handler-up-inner"],["unselectable","unselectable",1,"ant-input-number-handler","ant-input-number-handler-down",3,"mousedown","mouseup","mouseleave"],["nz-icon","","nzType","down",1,"ant-input-number-handler-down-inner"],[1,"ant-input-number-input-wrap"],["autocomplete","off",1,"ant-input-number-input",3,"disabled","placeholder","ngModel","keydown","keyup","ngModelChange"],["inputElement",""]],template:function(e,t){1&e&&(o.ɵɵelementStart(0,"div",0),o.ɵɵelementStart(1,"span",1),o.ɵɵlistener("mousedown",(function(e){return t.up(e)}))("mouseup",(function(e){return t.stop()}))("mouseleave",(function(e){return t.stop()})),o.ɵɵelement(2,"i",2),o.ɵɵelementEnd(),o.ɵɵelementStart(3,"span",3),o.ɵɵlistener("mousedown",(function(e){return t.down(e)}))("mouseup",(function(e){return t.stop()}))("mouseleave",(function(e){return t.stop()})),o.ɵɵelement(4,"i",4),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(5,"div",5),o.ɵɵelementStart(6,"input",6,7),o.ɵɵlistener("keydown",(function(e){return t.onKeyDown(e)}))("keyup",(function(e){return t.onKeyUp()}))("ngModelChange",(function(e){return t.onModelChange(e)})),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e&&(o.ɵɵadvance(1),o.ɵɵclassProp("ant-input-number-handler-up-disabled",t.disabledUp),o.ɵɵadvance(2),o.ɵɵclassProp("ant-input-number-handler-down-disabled",t.disabledDown),o.ɵɵadvance(3),o.ɵɵproperty("disabled",t.nzDisabled)("placeholder",t.nzPlaceHolder)("ngModel",t.displayValue),o.ɵɵattribute("id",t.nzId)("min",t.nzMin)("max",t.nzMax)("step",t.nzStep))},directives:[u.NzIconDirective,i.DefaultValueAccessor,i.NgControlStatus,i.NgModel],encapsulation:2,changeDetection:0}),a([r.InputBoolean(),l("design:type",Object)],e.prototype,"nzDisabled",void 0),a([r.InputBoolean(),l("design:type",Object)],e.prototype,"nzAutoFocus",void 0),e}(),d=function(){function e(){}return e.ɵmod=o.ɵɵdefineNgModule({type:e}),e.ɵinj=o.ɵɵdefineInjector({factory:function(t){return new(t||e)},imports:[[s.CommonModule,i.FormsModule,u.NzIconModule]]}),e}();("undefined"==typeof ngJitMode||ngJitMode)&&o.ɵɵsetNgModuleScope(d,{declarations:[p],imports:[s.CommonModule,i.FormsModule,u.NzIconModule],exports:[p]}),e.NzInputNumberComponent=p,e.NzInputNumberModule=d,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-zorro-antd-input-number.umd.min.js.map