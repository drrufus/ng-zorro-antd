!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/cdk/platform"),require("@angular/core"),require("@angular/common"),require("rxjs"),require("rxjs/operators"),require("ng-zorro-antd/core"),require("ng-zorro-antd/affix")):"function"==typeof define&&define.amd?define("ng-zorro-antd/anchor",["exports","@angular/cdk/platform","@angular/core","@angular/common","rxjs","rxjs/operators","ng-zorro-antd/core","ng-zorro-antd/affix"],t):t(((e=e||self)["ng-zorro-antd"]=e["ng-zorro-antd"]||{},e["ng-zorro-antd"].anchor={}),e.ng.cdk.platform,e.ng.core,e.ng.common,e.rxjs,e.rxjs.operators,e["ng-zorro-antd"].core,e["ng-zorro-antd"].affix)}(this,(function(e,t,n,o,r,i,c,l){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function s(e,t,n,o){var r,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(c=(i<3?r(c):i>3?r(t,n,c):r(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c}function a(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}var f=["ink"];function p(e,t){}function u(e,t){if(1&e&&(n.ɵɵelementStart(0,"nz-affix",2),n.ɵɵtemplate(1,p,0,0,"ng-template",3),n.ɵɵelementEnd()),2&e){var o=n.ɵɵnextContext(),r=n.ɵɵreference(2);n.ɵɵproperty("nzOffsetTop",o.nzOffsetTop),n.ɵɵadvance(1),n.ɵɵproperty("ngTemplateOutlet",r)}}var h=function(e){return{fixed:e}};function d(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",4),n.ɵɵelementStart(1,"div",5),n.ɵɵelementStart(2,"div",6),n.ɵɵelement(3,"div",7,8),n.ɵɵelementEnd(),n.ɵɵprojection(5),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e){var o=n.ɵɵnextContext();n.ɵɵproperty("ngStyle",o.wrapperStyle),n.ɵɵadvance(1),n.ɵɵproperty("ngClass",n.ɵɵpureFunction1(3,h,!o.nzAffix&&!o.nzShowInkInFixed)),n.ɵɵadvance(2),n.ɵɵclassProp("visible",o.visible)}}var g=["*"],m=/#([^#]+)$/,v=function(){function e(e,t,o,r,i){this.nzConfigService=e,this.scrollSrv=t,this.doc=o,this.cdr=r,this.platform=i,this.nzAffix=!0,this.nzClick=new n.EventEmitter,this.nzScroll=new n.EventEmitter,this.visible=!1,this.wrapperStyle={"max-height":"100vh"},this.links=[],this.animating=!1,this.target=null,this.scroll$=null,this.destroyed=!1}return Object.defineProperty(e.prototype,"nzOffsetTop",{get:function(){return this._offsetTop},set:function(e){this._offsetTop=c.toNumber(e,0),this.wrapperStyle={"max-height":"calc(100vh - "+this._offsetTop+"px)"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nzTarget",{set:function(e){this.target="string"==typeof e?this.doc.querySelector(e):e,this.registerScrollEvent()},enumerable:!0,configurable:!0}),e.prototype.registerLink=function(e){this.links.push(e)},e.prototype.unregisterLink=function(e){this.links.splice(this.links.indexOf(e),1)},e.prototype.getTarget=function(){return this.target||window},e.prototype.ngAfterViewInit=function(){this.registerScrollEvent()},e.prototype.ngOnDestroy=function(){this.destroyed=!0,this.removeListen()},e.prototype.registerScrollEvent=function(){var e=this;this.platform.isBrowser&&(this.removeListen(),this.scroll$=r.fromEvent(this.getTarget(),"scroll").pipe(i.throttleTime(50),i.distinctUntilChanged()).subscribe((function(){return e.handleScroll()})),setTimeout((function(){return e.handleScroll()})))},e.prototype.removeListen=function(){this.scroll$&&this.scroll$.unsubscribe()},e.prototype.getOffsetTop=function(e){if(!e||!e.getClientRects().length)return 0;var t=e.getBoundingClientRect();return t.width||t.height?this.getTarget()===window?t.top-e.ownerDocument.documentElement.clientTop:t.top-this.getTarget().getBoundingClientRect().top:t.top},e.prototype.handleScroll=function(){var e=this;if("undefined"!=typeof document&&!this.destroyed&&!this.animating){var t=[],n=(this.nzOffsetTop||0)+this.nzBounds;if(this.links.forEach((function(o){var r=m.exec(o.nzHref.toString());if(r){var i=e.doc.getElementById(r[1]);if(i){var c=e.getOffsetTop(i);c<n&&t.push({top:c,comp:o})}}})),this.visible=!!t.length,this.visible){var o=t.reduce((function(e,t){return t.top>e.top?t:e}));this.handleActive(o.comp)}else this.clearActive(),this.cdr.detectChanges()}},e.prototype.clearActive=function(){this.links.forEach((function(e){e.active=!1,e.markForCheck()}))},e.prototype.handleActive=function(e){this.clearActive(),e.active=!0,e.markForCheck();var t=e.elementRef.nativeElement.querySelector(".ant-anchor-link-title");this.ink.nativeElement.style.top=t.offsetTop+t.clientHeight/2-4.5+"px",this.visible=!0,this.cdr.detectChanges(),this.nzScroll.emit(e)},e.prototype.handleScrollTo=function(e){var t=this,n=this.doc.querySelector(e.nzHref);if(n){this.animating=!0;var o=this.scrollSrv.getScroll(this.getTarget())+this.getOffsetTop(n)-(this.nzOffsetTop||0);this.scrollSrv.scrollTo(this.getTarget(),o,void 0,(function(){t.animating=!1,t.handleActive(e)})),this.nzClick.emit(e.nzHref)}},e.ɵfac=function(r){return new(r||e)(n.ɵɵdirectiveInject(c.NzConfigService),n.ɵɵdirectiveInject(c.NzScrollService),n.ɵɵdirectiveInject(o.DOCUMENT),n.ɵɵdirectiveInject(n.ChangeDetectorRef),n.ɵɵdirectiveInject(t.Platform))},e.ɵcmp=n.ɵɵdefineComponent({type:e,selectors:[["nz-anchor"]],viewQuery:function(e,t){var o;(1&e&&n.ɵɵviewQuery(f,!0),2&e)&&(n.ɵɵqueryRefresh(o=n.ɵɵloadQuery())&&(t.ink=o.first))},inputs:{nzAffix:"nzAffix",nzShowInkInFixed:"nzShowInkInFixed",nzBounds:"nzBounds",nzOffsetTop:"nzOffsetTop",nzTarget:"nzTarget"},outputs:{nzClick:"nzClick",nzScroll:"nzScroll"},exportAs:["nzAnchor"],ngContentSelectors:g,decls:3,vars:2,consts:[[3,"nzOffsetTop",4,"ngIf","ngIfElse"],["content",""],[3,"nzOffsetTop"],[3,"ngTemplateOutlet"],[1,"ant-anchor-wrapper",3,"ngStyle"],[1,"ant-anchor",3,"ngClass"],[1,"ant-anchor-ink"],[1,"ant-anchor-ink-ball"],["ink",""]],template:function(e,t){if(1&e&&(n.ɵɵprojectionDef(),n.ɵɵtemplate(0,u,2,2,"nz-affix",0),n.ɵɵtemplate(1,d,6,5,"ng-template",null,1,n.ɵɵtemplateRefExtractor)),2&e){var o=n.ɵɵreference(2);n.ɵɵproperty("ngIf",t.nzAffix)("ngIfElse",o)}},directives:[o.NgIf,l.NzAffixComponent,o.NgTemplateOutlet,o.NgStyle,o.NgClass],encapsulation:2,changeDetection:0}),s([c.InputBoolean(),a("design:type",Object)],e.prototype,"nzAffix",void 0),s([c.WithConfig("anchor",!1),c.InputBoolean(),a("design:type",Boolean)],e.prototype,"nzShowInkInFixed",void 0),s([c.WithConfig("anchor",5),c.InputNumber(),a("design:type",Number)],e.prototype,"nzBounds",void 0),s([c.WithConfig("anchor"),a("design:type",Number),a("design:paramtypes",[Number])],e.prototype,"nzOffsetTop",null),e}(),y=["nzTemplate"];function z(e,t){if(1&e&&(n.ɵɵelementStart(0,"span"),n.ɵɵtext(1),n.ɵɵelementEnd()),2&e){var o=n.ɵɵnextContext();n.ɵɵadvance(1),n.ɵɵtextInterpolate(o.titleStr)}}var S=["*"],k=function(){function e(e,t,n,o,r){this.elementRef=e,this.anchorComp=t,this.cdr=n,this.platform=o,this.nzHref="#",this.titleStr="",this.active=!1,r.addClass(e.nativeElement,"ant-anchor-link")}return Object.defineProperty(e.prototype,"nzTitle",{set:function(e){e instanceof n.TemplateRef?(this.titleStr=null,this.titleTpl=e):this.titleStr=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.anchorComp.registerLink(this)},e.prototype.goToClick=function(e){e.preventDefault(),e.stopPropagation(),this.platform.isBrowser&&this.anchorComp.handleScrollTo(this)},e.prototype.markForCheck=function(){this.cdr.markForCheck()},e.prototype.ngOnDestroy=function(){this.anchorComp.unregisterLink(this)},e.ɵfac=function(o){return new(o||e)(n.ɵɵdirectiveInject(n.ElementRef),n.ɵɵdirectiveInject(v),n.ɵɵdirectiveInject(n.ChangeDetectorRef),n.ɵɵdirectiveInject(t.Platform),n.ɵɵdirectiveInject(n.Renderer2))},e.ɵcmp=n.ɵɵdefineComponent({type:e,selectors:[["nz-link"]],contentQueries:function(e,t,o){var r;(1&e&&n.ɵɵcontentQuery(o,y,!0),2&e)&&(n.ɵɵqueryRefresh(r=n.ɵɵloadQuery())&&(t.nzTemplate=r.first))},hostBindings:function(e,t,o){1&e&&n.ɵɵallocHostVars(1),2&e&&n.ɵɵclassProp("ant-anchor-link-active",t.active)},inputs:{nzHref:"nzHref",nzTitle:"nzTitle"},exportAs:["nzLink"],ngContentSelectors:S,decls:3,vars:4,consts:[[1,"ant-anchor-link-title",3,"href","title","click"],[4,"ngIf","ngIfElse"]],template:function(e,t){1&e&&(n.ɵɵprojectionDef(),n.ɵɵelementStart(0,"a",0),n.ɵɵlistener("click",(function(e){return t.goToClick(e)})),n.ɵɵtemplate(1,z,2,1,"span",1),n.ɵɵelementEnd(),n.ɵɵprojection(2)),2&e&&(n.ɵɵpropertyInterpolate("href",t.nzHref,n.ɵɵsanitizeUrl),n.ɵɵpropertyInterpolate("title",t.titleStr),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.titleStr)("ngIfElse",t.titleTpl||t.nzTemplate))},directives:[o.NgIf],styles:["\n      nz-link {\n        display: block;\n      }\n    "],encapsulation:2,changeDetection:0}),e}(),T=function(){function e(){}return e.ɵmod=n.ɵɵdefineNgModule({type:e}),e.ɵinj=n.ɵɵdefineInjector({factory:function(t){return new(t||e)},providers:[c.SCROLL_SERVICE_PROVIDER],imports:[[o.CommonModule,l.NzAffixModule,t.PlatformModule]]}),e}();("undefined"==typeof ngJitMode||ngJitMode)&&n.ɵɵsetNgModuleScope(T,{declarations:[v,k],imports:[o.CommonModule,l.NzAffixModule,t.PlatformModule],exports:[v,k]}),e.NzAnchorComponent=v,e.NzAnchorLinkComponent=k,e.NzAnchorModule=T,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-zorro-antd-anchor.umd.min.js.map