!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/cdk/keycodes"),require("@angular/cdk/overlay"),require("@angular/cdk/platform"),require("@angular/cdk/portal"),require("@angular/core"),require("ng-zorro-antd/button"),require("ng-zorro-antd/core"),require("rxjs"),require("rxjs/operators"),require("@angular/common"),require("@angular/forms"),require("ng-zorro-antd/icon"),require("ng-zorro-antd/menu")):"function"==typeof define&&define.amd?define("ng-zorro-antd/dropdown",["exports","@angular/cdk/keycodes","@angular/cdk/overlay","@angular/cdk/platform","@angular/cdk/portal","@angular/core","ng-zorro-antd/button","ng-zorro-antd/core","rxjs","rxjs/operators","@angular/common","@angular/forms","ng-zorro-antd/icon","ng-zorro-antd/menu"],t):t(((e=e||self)["ng-zorro-antd"]=e["ng-zorro-antd"]||{},e["ng-zorro-antd"].dropdown={}),e.ng.cdk.keycodes,e.ng.cdk.overlay,e.ng.cdk.platform,e.ng.cdk.portal,e.ng.core,e["ng-zorro-antd"].button,e["ng-zorro-antd"].core,e.rxjs,e.rxjs.operators,e.ng.common,e.ng.forms,e["ng-zorro-antd"].icon,e["ng-zorro-antd"].menu)}(this,(function(e,t,n,o,i,r,s,a,l,c,u,p,d,h){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var f=function(e,t){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function y(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s}function v(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function g(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,i,r=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(e){i={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s}function z(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isInDropDown=!0,t}return function(e,t){function n(){this.constructor=e}f(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.ɵfac=function(e){return b(e||t)},t.ɵprov=r.ɵɵdefineInjectable({token:t,factory:t.ɵfac}),t}(a.NzMenuBaseService),b=r.ɵɵgetInheritedFactory(m);
/**
     * @license
     * Copyright Alibaba.com All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE
     */
function w(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"div",1),r.ɵɵlistener("mouseenter",(function(e){return r.ɵɵrestoreView(n),r.ɵɵnextContext(2).setVisibleStateWhen(!0,"hover")}))("mouseleave",(function(e){return r.ɵɵrestoreView(n),r.ɵɵnextContext(2).setVisibleStateWhen(!1,"hover")})),r.ɵɵelementStart(1,"div"),r.ɵɵprojection(2),r.ɵɵelementEnd(),r.ɵɵelementEnd()}if(2&e){var o=r.ɵɵnextContext(2);r.ɵɵclassMap("ant-dropdown nz-dropdown ant-dropdown-placement-"+o.nzPlacement),r.ɵɵproperty("ngClass",o.nzOverlayClassName)("ngStyle",o.nzOverlayStyle)("@slideMotion",o.dropDownPosition)("@.disabled",null==o.noAnimation?null:o.noAnimation.nzNoAnimation)("nzNoAnimation",null==o.noAnimation?null:o.noAnimation.nzNoAnimation),r.ɵɵadvance(1),r.ɵɵclassProp("ant-table-filter-dropdown",o.nzTableFilter)}}function M(e,t){if(1&e&&r.ɵɵtemplate(0,w,3,9,"div",0),2&e){var n=r.ɵɵnextContext();r.ɵɵproperty("ngIf",n.open)}}var S=["*"];function C(e){return e.get(m)}var O=function(){function e(e,t,n,o,i,r){this.cdr=e,this.elementRef=t,this.renderer=n,this.viewContainerRef=o,this.nzMenuDropdownService=i,this.noAnimation=r,this.open=!1,this.triggerWidth=0,this.dropDownPosition="bottom",this.visible$=new l.Subject,this.nzTrigger="hover",this.nzPlacement="bottomLeft",this.nzOverlayClassName="",this.nzOverlayStyle={},this.nzTableFilter=!1}return e.prototype.setVisibleStateWhen=function(e,t){void 0===t&&(t="all"),this.nzTrigger!==t&&"all"!==t||this.visible$.next(e)},e.prototype.setValue=function(e,t){this[e]=t,this.cdr.markForCheck()},e.prototype.ngAfterContentInit=function(){this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),this.elementRef.nativeElement)},e.ɵfac=function(t){return new(t||e)(r.ɵɵdirectiveInject(r.ChangeDetectorRef),r.ɵɵdirectiveInject(r.ElementRef),r.ɵɵdirectiveInject(r.Renderer2),r.ɵɵdirectiveInject(r.ViewContainerRef),r.ɵɵdirectiveInject(m),r.ɵɵdirectiveInject(a.NzNoAnimationDirective,9))},e.ɵcmp=r.ɵɵdefineComponent({type:e,selectors:[["nz-dropdown-menu"]],viewQuery:function(e,t){var n;(1&e&&r.ɵɵstaticViewQuery(r.TemplateRef,!0),2&e)&&(r.ɵɵqueryRefresh(n=r.ɵɵloadQuery())&&(t.templateRef=n.first))},exportAs:["nzDropdownMenu"],features:[r.ɵɵProvidersFeature([m,{provide:a.NzDropdownHigherOrderServiceToken,useFactory:C,deps:[[new r.Self,r.Injector]]}])],ngContentSelectors:S,decls:1,vars:0,consts:[[3,"class","ngClass","ngStyle","nzNoAnimation","mouseenter","mouseleave",4,"ngIf"],[3,"ngClass","ngStyle","nzNoAnimation","mouseenter","mouseleave"]],template:function(e,t){1&e&&(r.ɵɵprojectionDef(),r.ɵɵtemplate(0,M,1,1,"ng-template"))},directives:[u.NgIf,u.NgClass,u.NgStyle,a.NzNoAnimationDirective],styles:["\n      :root .ant-dropdown.nz-dropdown {\n        top: 0;\n        left: 0;\n        position: relative;\n        width: 100%;\n        margin-top: 4px;\n        margin-bottom: 4px;\n      }\n    "],encapsulation:2,data:{animation:[a.slideMotion]},changeDetection:0}),e}(),D=function(){function e(e,t,n,o,i,s,u){this.elementRef=e,this.renderer=t,this.overlay=n,this.platform=o,this.nzButtonComponent=i,this.nzButtonGroupComponent=s,this.viewContainerRef=u,this.overlayRef=null,this.destroy$=new l.Subject,this.triggerWidth=0,this.el=this.elementRef.nativeElement,this.dropdownOpen=!1,this.positions=z(a.DEFAULT_DROPDOWN_POSITIONS),this.positionSubscription=l.Subscription.EMPTY,this.overlaySubscription=l.Subscription.EMPTY,this.hover$=l.merge(l.fromEvent(this.el,"mouseenter").pipe(c.mapTo(!0)),l.fromEvent(this.el,"mouseleave").pipe(c.mapTo(!1))),this.$click=l.fromEvent(this.el,"click").pipe(c.tap((function(e){return e.stopPropagation()})),c.mapTo(!0)),this.nzTrigger="hover",this.nzBackdrop=!0,this.nzClickHide=!0,this.nzDisabled=!1,this.nzVisible=!1,this.nzTableFilter=!1,this.nzOverlayClassName="",this.nzOverlayStyle={},this.nzPlacement="bottomLeft",this.nzVisibleChange=new r.EventEmitter,t.addClass(e.nativeElement,"ant-dropdown-trigger"),this.nzButtonComponent&&(this.nzButtonComponent.isInDropdown=!0),this.nzButtonGroupComponent&&(this.nzButtonGroupComponent.isInDropdown=!0)}return e.prototype.setDisabled=function(e){e?(this.renderer.setAttribute(this.el,"disabled",""),this.nzVisible&&(this.nzVisible=!1,this.nzVisibleChange.emit(this.nzVisible),this.updateOverlayByVisible())):this.renderer.removeAttribute(this.el,"disabled")},e.prototype.getOverlayConfig=function(){return new n.OverlayConfig({positionStrategy:this.overlay.position().flexibleConnectedTo(this.el).withLockedPosition(),minWidth:this.triggerWidth,hasBackdrop:"click"===this.nzTrigger,backdropClass:this.nzBackdrop?void 0:"nz-overlay-transparent-backdrop",scrollStrategy:this.overlay.scrollStrategies.reposition()})},e.prototype.createOverlay=function(){if(this.overlayRef){var e=this.overlayRef.getConfig();return this.updateOverlayConfig(e),this.overlayRef}var t=this.getOverlayConfig();return this.overlayRef=this.overlay.create(t),this.subscribeOverlayEvent(this.overlayRef),this.subscribeToPositions(t.positionStrategy),this.overlayRef},e.prototype.updateOverlayConfig=function(e){return e.minWidth=this.triggerWidth,e.hasBackdrop="click"===this.nzTrigger,e},e.prototype.dispose=function(){this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=null,this.positionSubscription.unsubscribe(),this.overlaySubscription.unsubscribe())},e.prototype.subscribeToPositions=function(e){var t=this;this.positionSubscription.unsubscribe(),this.positionSubscription=e.positionChanges.pipe(c.takeUntil(this.destroy$)).subscribe((function(e){t.nzDropdownMenu.setValue("dropDownPosition",e.connectionPair.originY)}))},e.prototype.subscribeOverlayEvent=function(e){var n=this;this.overlaySubscription.unsubscribe(),this.overlaySubscription=l.merge(e.backdropClick(),e.detachments(),e.keydownEvents().pipe(c.filter((function(e){return e.keyCode===t.ESCAPE&&!t.hasModifierKey(e)})))).pipe(c.takeUntil(this.destroy$)).subscribe((function(){n.nzDropdownMenu.setVisibleStateWhen(!1)}))},e.prototype.getPortal=function(){return this.portal&&this.portal.templateRef===this.nzDropdownMenu.templateRef||(this.portal=new i.TemplatePortal(this.nzDropdownMenu.templateRef,this.viewContainerRef)),this.portal},e.prototype.openMenu=function(){if(!this.dropdownOpen){var e=this.createOverlay(),t=e.getConfig();this.nzDropdownMenu.setValue("open",!0),this.setPosition(t.positionStrategy),e.attach(this.getPortal()),this.dropdownOpen=!0}},e.prototype.closeMenu=function(){this.overlayRef&&(this.overlayRef.detach(),this.dropdownOpen=!1,this.nzDropdownMenu.setValue("open",!1))},e.prototype.setPosition=function(e){this.positionStrategy=e,e.withPositions(z(this.positions))},e.prototype.updatePositionStrategy=function(e){this.positionStrategy&&this.positionStrategy.withPositions(e)},e.prototype.setTriggerWidth=function(){if(this.platform.isBrowser){var e=this.nzMatchWidthElement?this.nzMatchWidthElement.nativeElement:this.el;this.triggerWidth=e.getBoundingClientRect().width}},e.prototype.initActionSubscribe=function(){var e=this,t="hover"===this.nzTrigger?this.hover$:this.$click,n=this.nzDropdownMenu.visible$,o=this.nzClickHide?this.nzDropdownMenu.nzMenuDropdownService.menuItemClick$.pipe(c.mapTo(!1)):l.EMPTY,i=l.merge(n,t,o),r=this.nzDropdownMenu.nzMenuDropdownService.menuOpen$;l.combineLatest([i,r]).pipe(c.map((function(e){var t=g(e,2),n=t[0],o=t[1];return n||o})),c.debounceTime(50),c.distinctUntilChanged(),c.takeUntil(this.destroy$)).subscribe((function(t){e.nzDisabled||e.nzVisible===t||(e.nzVisible=t,e.updateOverlayByVisible(),e.nzVisibleChange.emit(e.nzVisible),e.setTriggerWidth(),e.nzDropdownMenu.setValue("triggerWidth",e.triggerWidth))}))},e.prototype.updateOverlayByVisible=function(){this.nzVisible?this.openMenu():this.closeMenu()},e.prototype.updateDisabledState=function(){this.setDisabled(this.nzDisabled)},e.prototype.regeneratePosition=function(e,t){return z([a.POSITION_MAP[e]],t)},e.prototype.ngAfterViewInit=function(){this.nzDropdownMenu&&(this.setTriggerWidth(),this.initActionSubscribe(),this.updateDisabledState())},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete(),this.dispose()},e.prototype.ngOnChanges=function(e){var t=e.nzVisible,n=e.nzTrigger,o=e.nzPlacement,i=e.nzDisabled,r=e.nzOverlayClassName,s=e.nzOverlayStyle,a=e.nzTableFilter;this.nzDropdownMenu&&(t&&(this.updateOverlayByVisible(),this.nzDropdownMenu.visible$.next(this.nzVisible)),n&&this.nzDropdownMenu.setValue("nzTrigger",this.nzTrigger),a&&this.nzDropdownMenu.setValue("nzTableFilter",this.nzTableFilter),r&&this.nzDropdownMenu.setValue("nzOverlayClassName",this.nzOverlayClassName),s&&this.nzDropdownMenu.setValue("nzOverlayStyle",this.nzOverlayStyle),o&&(this.nzDropdownMenu.setValue("nzPlacement",this.nzPlacement),this.nzDropdownMenu.setValue("dropDownPosition",-1!==this.nzDropdownMenu.nzPlacement.indexOf("top")?"top":"bottom"),this.positions=this.regeneratePosition(this.nzPlacement,this.positions),this.updatePositionStrategy(this.positions))),i&&this.updateDisabledState()},e.ɵfac=function(t){return new(t||e)(r.ɵɵdirectiveInject(r.ElementRef),r.ɵɵdirectiveInject(r.Renderer2),r.ɵɵdirectiveInject(n.Overlay),r.ɵɵdirectiveInject(o.Platform),r.ɵɵdirectiveInject(s.NzButtonComponent,9),r.ɵɵdirectiveInject(s.NzButtonGroupComponent,8),r.ɵɵdirectiveInject(r.ViewContainerRef))},e.ɵdir=r.ɵɵdefineDirective({type:e,selectors:[["","nz-dropdown",""]],inputs:{nzDropdownMenu:"nzDropdownMenu",nzTrigger:"nzTrigger",nzMatchWidthElement:"nzMatchWidthElement",nzBackdrop:"nzBackdrop",nzClickHide:"nzClickHide",nzDisabled:"nzDisabled",nzVisible:"nzVisible",nzTableFilter:"nzTableFilter",nzOverlayClassName:"nzOverlayClassName",nzOverlayStyle:"nzOverlayStyle",nzPlacement:"nzPlacement"},outputs:{nzVisibleChange:"nzVisibleChange"},exportAs:["nzDropdown"],features:[r.ɵɵNgOnChangesFeature()]}),y([a.InputBoolean(),v("design:type",Object)],e.prototype,"nzBackdrop",void 0),y([a.InputBoolean(),v("design:type",Object)],e.prototype,"nzClickHide",void 0),y([a.InputBoolean(),v("design:type",Object)],e.prototype,"nzDisabled",void 0),y([a.InputBoolean(),v("design:type",Object)],e.prototype,"nzVisible",void 0),y([a.InputBoolean(),v("design:type",Object)],e.prototype,"nzTableFilter",void 0),e}(),P=function(){function e(){}return e.ɵmod=r.ɵɵdefineNgModule({type:e}),e.ɵinj=r.ɵɵdefineInjector({factory:function(t){return new(t||e)}}),e}(),k=function(){function e(){}return e.ɵmod=r.ɵɵdefineNgModule({type:e}),e.ɵinj=r.ɵɵdefineInjector({factory:function(t){return new(t||e)}}),e}(),N=function(){function e(e,t){this.elementRef=e,this.renderer=t,this.renderer.addClass(this.elementRef.nativeElement,"ant-dropdown-link")}return e.ɵfac=function(t){return new(t||e)(r.ɵɵdirectiveInject(r.ElementRef),r.ɵɵdirectiveInject(r.Renderer2))},e.ɵdir=r.ɵɵdefineDirective({type:e,selectors:[["a","nz-dropdown",""]],exportAs:["nzDropdown"]}),e}(),R=function(){function e(){}return e.ɵmod=r.ɵɵdefineNgModule({type:e}),e.ɵinj=r.ɵɵdefineInjector({factory:function(t){return new(t||e)},imports:[[u.CommonModule,n.OverlayModule,p.FormsModule,s.NzButtonModule,h.NzMenuModule,d.NzIconModule,o.PlatformModule,a.NzNoAnimationModule,a.NzOverlayModule,P,k,a.NzAddOnModule],h.NzMenuModule]}),e}();("undefined"==typeof ngJitMode||ngJitMode)&&r.ɵɵsetNgModuleScope(R,{declarations:[D,N,O],imports:[u.CommonModule,n.OverlayModule,p.FormsModule,s.NzButtonModule,h.NzMenuModule,d.NzIconModule,o.PlatformModule,a.NzNoAnimationModule,a.NzOverlayModule,P,k,a.NzAddOnModule],exports:[h.NzMenuModule,D,N,O]});
/**
     * @license
     * Copyright Alibaba.com All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE
     */
var T=function(){function e(e){this.overlay=e,this.clickOutsideSubscription=l.Subscription.EMPTY,this.clickMenuSubscription=l.Subscription.EMPTY,this.positionSubscription=l.Subscription.EMPTY}return e.prototype.create=function(e,t){e.preventDefault();var n=this.createOverlay(e);n.hasAttached()&&this.close(),this.attachTemplatePortal(n,t),this.handleClickOutside()},e.prototype.close=function(){this.overlayRef&&(this.overlayRef.detach(),this.setOpenState(!1),this.clickOutsideSubscription.unsubscribe(),this.clickMenuSubscription.unsubscribe(),this.positionSubscription.unsubscribe())},e.prototype.handleClickOutside=function(){var e=this;this.clickOutsideSubscription.unsubscribe(),this.clickOutsideSubscription=l.fromEvent(document,"click").pipe(c.filter((function(t){return!!e.overlayRef&&!e.overlayRef.overlayElement.contains(t.target)})),c.filter((function(e){return 2!==e.button})),c.take(1)).subscribe((function(){e.close()}))},e.prototype.attachTemplatePortal=function(e,t){var n=this;this.nzDropdownMenuComponent=t,t.setValue("nzTrigger","click"),this.clickMenuSubscription.unsubscribe(),this.clickMenuSubscription=t.nzMenuDropdownService.menuItemClick$.subscribe((function(){n.close()})),e.attach(new i.TemplatePortal(t.templateRef,t.viewContainerRef)),this.setOpenState(!0)},e.prototype.setOpenState=function(e){this.nzDropdownMenuComponent.setValue("open",e)},e.prototype.getOverlayConfig=function(e){return new n.OverlayConfig({panelClass:"nz-dropdown-panel",positionStrategy:this.generatePositionStrategy(e),scrollStrategy:this.overlay.scrollStrategies.close()})},e.prototype.generatePositionStrategy=function(e){return this.overlay.position().flexibleConnectedTo({x:e.x,y:e.y}).withPositions([new n.ConnectionPositionPair({originX:"start",originY:"top"},{overlayX:"start",overlayY:"top"}),new n.ConnectionPositionPair({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"}),new n.ConnectionPositionPair({originX:"start",originY:"top"},{overlayX:"end",overlayY:"bottom"}),new n.ConnectionPositionPair({originX:"start",originY:"top"},{overlayX:"end",overlayY:"top"})])},e.prototype.subscribeToPositions=function(e){var t=this;this.positionSubscription.unsubscribe(),this.positionSubscription=e.positionChanges.subscribe((function(e){t.nzDropdownMenuComponent.setValue("dropDownPosition","bottom"===e.connectionPair.overlayY?"top":"bottom")}))},e.prototype.createOverlay=function(e){var t=this.getOverlayConfig(e);return this.overlayRef?this.updatePosition(this.overlayRef,e):this.overlayRef=this.overlay.create(t),this.subscribeToPositions(t.positionStrategy),this.overlayRef},e.prototype.updatePosition=function(e,t){e.updatePositionStrategy(this.generatePositionStrategy(t))},e.ɵfac=function(t){return new(t||e)(r.ɵɵinject(n.Overlay))},e.ɵprov=r.ɵɵdefineInjectable({token:e,factory:e.ɵfac,providedIn:k}),e}();e.NzContextMenuService=T,e.NzContextMenuServiceModule=k,e.NzDropDownADirective=N,e.NzDropDownDirective=D,e.NzDropDownModule=R,e.NzDropdownMenuComponent=O,e.NzDropdownServiceModule=P,e.NzMenuDropdownService=m,e.dropdownMenuServiceFactory=C,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-zorro-antd-dropdown.umd.min.js.map